<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ansible Encyclopedia · Architect's Toolkit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color-scheme: dark light;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background:
        radial-gradient(circle at top, #111827, #020617 60%),
        radial-gradient(circle at bottom, #000000, #020617 70%);
      color: #e5e7eb;
      display: flex;
      align-items: stretch;
      justify-content: center;
    }

    .shell {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      box-sizing: border-box;
    }

    .card {
      width: 100%;
      max-width: 1150px;
      background: rgba(15, 23, 42, 0.94);
      border-radius: 18px;
      padding: 1.5rem 1.75rem 1.75rem;
      box-shadow:
        0 22px 60px rgba(0, 0, 0, 0.85),
        0 0 0 1px rgba(148, 163, 184, 0.35);
      border: 1px solid rgba(148, 163, 184, 0.45);
      display: flex;
      flex-direction: column;
      gap: 1rem;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 0% 0%, rgba(59, 130, 246, 0.18), transparent 55%),
        radial-gradient(circle at 100% 0%, rgba(236, 72, 153, 0.16), transparent 55%),
        radial-gradient(circle at 50% 100%, rgba(16, 185, 129, 0.11), transparent 55%);
      opacity: 0.95;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .card-inner {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.25rem;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
      min-width: 0;
    }

    .title-row {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      min-width: 0;
    }

    h1.page-title {
      margin: 0;
      font-size: 1.5rem;
      font-weight: 600;
      letter-spacing: 0.01em;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    h1.page-title[contenteditable="true"] {
      cursor: text;
    }

    .page-title-hint {
      font-size: 0.76rem;
      color: #9ca3af;
      margin: 0;
    }

    .pill {
      border-radius: 999px;
      border: 1px solid rgba(248, 250, 252, 0.9);
      padding: 0.18rem 0.6rem;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.13em;
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.95);
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    .pill-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.3);
    }

    .tagline {
      margin: 0.1rem 0 0;
      font-size: 0.86rem;
      color: #d1d5db;
      max-width: 720px;
    }

    .meta {
      font-size: 0.76rem;
      color: #9ca3af;
      display: flex;
      flex-wrap: wrap;
      gap: 0.55rem;
      margin-top: 0.1rem;
    }

    .meta span {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    .meta-dot {
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: rgba(148, 163, 184, 0.9);
    }

    .main-menu-btn {
      border-radius: 999px;
      border: 1px solid #1f2937;
      padding: 0.4rem 0.95rem;
      font-size: 0.8rem;
      background: #020617;
      color: #9ca3af;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      transition:
        background 0.12s ease,
        border-color 0.12s ease,
        color 0.12s ease,
        transform 0.06s ease;
      white-space: nowrap;
    }

    .main-menu-btn:hover {
      background: #111827;
      border-color: #2563eb;
      color: #e5e7eb;
      transform: translateY(-1px);
    }

    .workspace {
      margin-top: 0.3rem;
      border-radius: 1rem;
      border: 1px dashed rgba(148, 163, 184, 0.6);
      min-height: 520px;
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.14), transparent 55%);
      overflow: hidden;
      display: flex;
      align-items: stretch;
      justify-content: stretch;
    }

    .ans-layout {
      display: flex;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
    }

    .ans-nav {
      width: 245px;
      min-width: 220px;
      max-width: 260px;
      border-right: 1px solid rgba(148, 163, 184, 0.4);
      padding: 1rem;
      box-sizing: border-box;
      background: linear-gradient(180deg, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.82));
      backdrop-filter: blur(18px);
      overflow-y: auto;
      font-size: 0.83rem;
    }

    .ans-nav h2 {
      margin: 0 0 0.35rem 0;
      font-size: 1rem;
      font-weight: 600;
    }

    .ans-nav p {
      margin: 0 0 0.75rem 0;
      font-size: 0.78rem;
      color: #9ca3af;
    }

    .ans-nav-section-label {
      margin-top: 0.7rem;
      margin-bottom: 0.25rem;
      font-size: 0.72rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #6b7280;
    }

    .ans-nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

    .ans-nav li {
      margin: 0;
    }

    .ans-nav a {
      color: #cbd5f5;
      text-decoration: none;
      display: block;
      padding: 0.22rem 0.4rem;
      border-radius: 999px;
      transition:
        background 0.12s ease,
        color 0.12s ease,
        transform 0.04s ease;
    }

    .ans-nav a:hover {
      background: rgba(37, 99, 235, 0.25);
      color: #eff6ff;
      transform: translateX(1px);
    }

    .ans-content {
      flex: 1;
      padding: 1rem 1.25rem 1.1rem;
      box-sizing: border-box;
      overflow-y: auto;
      font-size: 0.85rem;
    }

    .ans-section {
      margin-bottom: 1.5rem;
      padding-bottom: 1.1rem;
      border-bottom: 1px dashed rgba(148, 163, 184, 0.45);
    }

    .ans-section:last-of-type {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0.4rem;
    }

    .ans-section-header {
      display: flex;
      align-items: baseline;
      gap: 0.45rem;
      margin-bottom: 0.3rem;
    }

    .ans-section-header h2 {
      margin: 0;
      font-size: 1.02rem;
      font-weight: 600;
    }

    .ans-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.05rem 0.4rem;
      font-size: 0.65rem;
      border-radius: 999px;
      border: 1px solid rgba(96, 165, 250, 0.75);
      color: #bfdbfe;
      background: rgba(15, 23, 42, 0.96);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      white-space: nowrap;
    }

    .ans-tagline {
      margin: 0.3rem 0 0.4rem;
      color: #9ca3af;
      font-size: 0.82rem;
    }

    .ans-columns {
      display: grid;
      grid-template-columns: minmax(0, 1.15fr) minmax(0, 1fr);
      gap: 1rem;
    }

    .ans-pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.35rem;
    }

    .ans-pill {
      padding: 0.08rem 0.45rem;
      border-radius: 999px;
      font-size: 0.72rem;
      border: 1px solid rgba(156, 163, 175, 0.85);
      color: #e5e7eb;
      white-space: nowrap;
      background: rgba(15, 23, 42, 0.9);
    }

    .ans-pill--primary {
      border-color: rgba(59, 130, 246, 0.9);
      color: #dbeafe;
    }

    .ans-list {
      margin: 0.35rem 0 0.2rem;
      padding-left: 1.1rem;
      font-size: 0.82rem;
    }

    .ans-list li {
      margin-bottom: 0.18rem;
    }

    .ans-callout {
      font-size: 0.8rem;
      border-radius: 0.7rem;
      padding: 0.55rem 0.7rem;
      border: 1px solid rgba(59, 130, 246, 0.85);
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.35), rgba(15, 23, 42, 0.96));
      color: #e5e7eb;
    }

    .ans-callout strong {
      color: #bfdbfe;
      font-weight: 600;
    }

    .ans-kv {
      margin: 0.4rem 0;
      display: grid;
      grid-template-columns: max-content minmax(0, 1fr);
      gap: 0.15rem 0.6rem;
      font-size: 0.8rem;
    }

    .ans-kv dt {
      font-weight: 600;
      color: #e5e7eb;
    }

    .ans-kv dd {
      margin: 0;
      color: #9ca3af;
    }

    .ans-code {
      margin-top: 0.4rem;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.78rem;
      background: #020617;
      border-radius: 0.6rem;
      padding: 0.55rem 0.65rem;
      border: 1px solid rgba(31, 41, 55, 0.9);
      overflow-x: auto;
      line-height: 1.35;
    }

    .ans-code code {
      white-space: pre;
    }

    .ans-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.45rem;
      font-size: 0.8rem;
      border-radius: 0.7rem;
      overflow: hidden;
    }

    .ans-table thead {
      background: rgba(15, 23, 42, 0.98);
    }

    .ans-table th,
    .ans-table td {
      border: 1px solid rgba(55, 65, 81, 0.95);
      padding: 0.3rem 0.45rem;
      text-align: left;
      vertical-align: top;
    }

    .ans-table th {
      font-weight: 600;
      color: #e5e7eb;
    }

    .ans-table td {
      color: #d1d5db;
    }

    .ans-note {
      margin-top: 0.4rem;
      font-size: 0.78rem;
      color: #9ca3af;
    }

    .ans-chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.3rem;
      margin-top: 0.3rem;
    }

    .ans-chip {
      font-size: 0.7rem;
      border-radius: 999px;
      padding: 0.15rem 0.4rem;
      border: 1px solid rgba(148, 163, 184, 0.85);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
    }

    .ans-badge-soft {
      display: inline-block;
      padding: 0.12rem 0.45rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      font-size: 0.7rem;
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.96);
    }

    .footnote {
      margin-top: 0.4rem;
      font-size: 0.75rem;
      color: #9ca3af;
      text-align: right;
    }

    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    @media (max-width: 950px) {
      .ans-layout {
        flex-direction: column;
      }

      .ans-nav {
        width: 100%;
        max-width: 100%;
        border-right: none;
        border-bottom: 1px solid rgba(148, 163, 184, 0.4);
      }

      .ans-columns {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 720px) {
      .shell {
        padding: 1.25rem;
      }

      .card {
        padding: 1.1rem 1.1rem 1.3rem;
      }

      header {
        flex-direction: column;
        align-items: flex-start;
      }

      h1.page-title {
        font-size: 1.35rem;
      }

      .footnote {
        text-align: left;
      }
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="card">
      <div class="card-inner">
        <header>
          <div class="title-block">
            <div class="title-row">
              <h1 class="page-title" contenteditable="true" spellcheck="false">
                Ansible Encyclopedia · Architect's Toolkit
              </h1>
              <div class="pill">
                <span class="pill-dot"></span>
                <span>Automation · Configuration · Day-2 Ops</span>
              </div>
            </div>
            <p class="page-title-hint">
              Rename this page to match a specific platform or program (e.g., “Ansible for Cloud Baselines”).
            </p>
            <p class="tagline">
              Language, patterns, and cloud modules for Ansible — grouped by what you actually use them for:
              golden images, hardening, orchestrating Terraform, and day-2 operations.
            </p>
            <div class="meta">
              <span><span class="meta-dot"></span> Inventory · Playbooks · Roles · Collections</span>
              <span><span class="meta-dot"></span> Cloud modules (AWS · Azure · GCP · Oracle · VMware)</span>
              <span><span class="meta-dot"></span> Compliance &amp; hardening with CIS / STIG / NIST baselines</span>
            </div>
          </div>
          <button
            class="main-menu-btn"
            type="button"
            onclick="window.location.href='index.html'">
            ← Main menu
          </button>
        </header>

        <section class="workspace">
          <div class="ans-layout">
            <!-- NAV -->
            <nav class="ans-nav">
              <h2>Ansible Encyclopedia</h2>
              <p>Concepts, file types, and modules — wired into multi-cloud and governance.</p>

              <div class="ans-nav-section-label">Orientation</div>
              <ul>
                <li><a href="#ans-overview">1. What Ansible Is (and Is Not)</a></li>
                <li><a href="#ans-terraform-boundary">2. Terraform vs Ansible (Infra vs Config)</a></li>
              </ul>

              <div class="ans-nav-section-label">Core Language &amp; Files</div>
              <ul>
                <li><a href="#ans-inventory">3. Inventory &amp; Host Groups</a></li>
                <li><a href="#ans-playbooks">4. Playbooks &amp; Plays</a></li>
                <li><a href="#ans-tasks-modules">5. Tasks, Modules &amp; Plugins</a></li>
                <li><a href="#ans-vars-templates">6. Variables, Facts &amp; Templates (Jinja2)</a></li>
                <li><a href="#ans-roles-collections">7. Roles, Collections &amp; Folder Layout</a></li>
                <li><a href="#ans-flow-control">8. Handlers, Conditionals, Loops, Blocks</a></li>
                <li><a href="#ans-vault">9. Vault, Secrets &amp; Sensitive Data</a></li>
              </ul>

              <div class="ans-nav-section-label">Execution &amp; Scale</div>
              <ul>
                <li><a href="#ans-execution">10. Execution Strategies &amp; Performance</a></li>
                <li><a href="#ans-controller">11. AWX / Automation Controller Patterns</a></li>
              </ul>

              <div class="ans-nav-section-label">Cloud &amp; Infra</div>
              <ul>
                <li><a href="#ans-cloud-modules">12. Cloud &amp; Platform Modules (AWS · Azure · GCP · Oracle · VMware)</a></li>
                <li><a href="#ans-golden">13. Golden Images, Hardening &amp; Day-2 Ops</a></li>
              </ul>

              <div class="ans-nav-section-label">Governance &amp; Testing</div>
              <ul>
                <li><a href="#ans-compliance">14. Compliance &amp; Baselines with Ansible</a></li>
                <li><a href="#ans-testing">15. Linting, Testing &amp; CI/CD</a></li>
              </ul>

              <div class="ans-nav-section-label">Reference</div>
              <ul>
                <li><a href="#ans-dictionary">16. Command &amp; Module Dictionary</a></li>
              </ul>
            </nav>

            <!-- CONTENT -->
            <main class="ans-content">
              <!-- 1. OVERVIEW -->
              <section id="ans-overview" class="ans-section">
                <div class="ans-section-header">
                  <h2>1. What Ansible Is (and Is Not)</h2>
                  <span class="ans-badge">Orientation</span>
                </div>
                <p class="ans-tagline">
                  Ansible is an agentless automation engine for configuration, application deployment,
                  and orchestrating other tools (like Terraform, packer, Kubernetes, etc.). It’s
                  <em>state-driven but not declarative in the same way Terraform is</em>.
                </p>

                <div class="ans-columns">
                  <div>
                    <dl class="ans-kv">
                      <dt>Transport</dt>
                      <dd>Primarily SSH (Linux/Unix) and WinRM (Windows); no agents required on hosts.</dd>

                      <dt>Language</dt>
                      <dd>YAML + Jinja2 templates; modules written in Python (and other languages via plugins).</dd>

                      <dt>State</dt>
                      <dd>
                        Desired state implied by tasks; Ansible modules are designed to be idempotent (run
                        repeatedly with no change when already compliant).
                      </dd>

                      <dt>Scope</dt>
                      <dd>
                        Configuration, hardening, app deployment, operational workflows, API orchestration,
                        compliance checks, ad-hoc tasks.
                      </dd>
                    </dl>

                    <div class="ans-pill-row">
                      <span class="ans-pill ans-pill--primary">Terraform: build it</span>
                      <span class="ans-pill ans-pill--primary">Ansible: configure &amp; run it</span>
                      <span class="ans-pill">Packer: image factory</span>
                      <span class="ans-pill">Kubernetes: schedule workloads</span>
                    </div>
                  </div>

                  <div>
                    <div class="ans-callout">
                      <strong>Architect’s angle:</strong>
                      treat Ansible as your
                      <em>configuration and day-2 control plane</em>. You use Terraform to create
                      networks, VMs and managed services, then Ansible to harden, configure,
                      deploy apps, and keep baselines in sync with your governance frameworks.
                    </div>
                  </div>
                </div>
              </section>

              <!-- 2. TERRAFORM BOUNDARY -->
              <section id="ans-terraform-boundary" class="ans-section">
                <div class="ans-section-header">
                  <h2>2. Terraform vs Ansible (Infra vs Config)</h2>
                  <span class="ans-badge">Design Boundary</span>
                </div>
                <p class="ans-tagline">
                  Use Terraform and Ansible together on purpose, not by accident. The key is deciding
                  which tool is the <em>owner of truth</em> for each layer.
                </p>

                <table class="ans-table">
                  <thead>
                    <tr>
                      <th>Layer</th>
                      <th>Use Terraform For</th>
                      <th>Use Ansible For</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><strong>Foundations</strong><br />Accounts, projects, subscriptions, VCN/VNet/VPC</td>
                      <td>
                        Creating accounts/projects, VPC/VNet, subnets, gateways, routing, IAM roles/policies,
                        base security groups.
                      </td>
                      <td>
                        Rarely. Maybe to bootstrap APIs or initial configs where Terraform support is weak.
                      </td>
                    </tr>
                    <tr>
                      <td><strong>Compute &amp; platform</strong><br />VMs, databases, managed services</td>
                      <td>
                        Creating instances, databases, autoscaling groups, managed services endpoints.
                      </td>
                      <td>
                        Hardening OS, installing agents, config files, patching, app runtimes, middleware.
                      </td>
                    </tr>
                    <tr>
                      <td><strong>Applications</strong></td>
                      <td>
                        Wiring infra dependencies (LB targets, DNS records, secrets references).
                      </td>
                      <td>
                        Deploying versions, updating config, restarting services, blue/green and rolling deploys.
                      </td>
                    </tr>
                    <tr>
                      <td><strong>Day-2 &amp; Governance</strong></td>
                      <td>
                        Drifting infra detection (via policy) and big, structural changes.
                      </td>
                      <td>
                        Continuous hardening, CIS/STIG roles, periodic remediation, compliance evidence collection.
                      </td>
                    </tr>
                  </tbody>
                </table>

                <p class="ans-note">
                  A common pattern is: <strong>Terraform creates hosts and core cloud services</strong>,
                  then outputs inventory data; <strong>Ansible consumes that inventory</strong> to run
                  hardening roles and deploy apps.
                </p>
              </section>

              <!-- 3. INVENTORY -->
              <section id="ans-inventory" class="ans-section">
                <div class="ans-section-header">
                  <h2>3. Inventory &amp; Host Groups</h2>
                  <span class="ans-badge">Core Concept</span>
                </div>
                <p class="ans-tagline">
                  Inventory tells Ansible <em>what</em> to talk to. Groups let you apply different
                  behavior to different sets of hosts (env, tier, region, etc.).
                </p>

                <div class="ans-columns">
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Static inventory (INI/YAML)</h3>
                    <div class="ans-code">
                      <code>[web]
web01.example.com
web02.example.com

[db]
db01.example.com

[prod:children]
web
db

[web:vars]
ansible_user=ubuntu
ansible_ssh_private_key_file=~/.ssh/prod-web.pem</code>
                    </div>

                    <ul class="ans-list">
                      <li><code>[group]</code> headers define groups.</li>
                      <li><code>[group:children]</code> lets you compose groups from other groups.</li>
                      <li><code>[group:vars]</code> defines group-level variables (SSH user, etc.).</li>
                    </ul>
                  </div>

                  <div>
                    <h3 style="margin:0 0 0.2rem;">Dynamic inventory (cloud / CMDB)</h3>
                    <p>
                      Instead of hand-listing hosts, dynamic inventory scripts/plugins query a source of
                      truth at runtime:
                    </p>
                    <ul class="ans-list">
                      <li>Cloud inventory (AWS, Azure, GCP, Oracle, VMware).</li>
                      <li>Service discovery / CMDB / IPAM.</li>
                      <li>Terraform state, if you choose to expose hosts that way.</li>
                    </ul>
                    <div class="ans-callout">
                      <strong>Pattern:</strong> use Terraform outputs (or tags) to mark groups
                      (<code>role=web</code>, <code>env=prod</code>), then configure dynamic inventory
                      to build groups automatically: “all prod web servers in us-east-1”.
                    </div>
                  </div>
                </div>
              </section>

              <!-- 4. PLAYBOOKS -->
              <section id="ans-playbooks" class="ans-section">
                <div class="ans-section-header">
                  <h2>4. Playbooks &amp; Plays</h2>
                  <span class="ans-badge">Core File</span>
                </div>
                <p class="ans-tagline">
                  A playbook is the top-level YAML file; each <em>play</em> targets a set of hosts and
                  runs tasks under a particular context.
                </p>

                <div class="ans-columns">
                  <div>
                    <div class="ans-code">
                      <code>---
- name: Harden and configure web servers
  hosts: web
  become: true
  vars:
    app_user: "app"
    app_port: 8080

  pre_tasks:
    - name: Ensure apt cache is up to date (Debian/Ubuntu)
      ansible.builtin.apt:
        update_cache: true
      when: ansible_os_family == "Debian"

  roles:
    - role: cis_hardening
    - role: app_webserver

  post_tasks:
    - name: Verify app is listening
      ansible.builtin.wait_for:
        host: 0.0.0.0
        port: "{{ app_port }}"
        timeout: 30</code>
                    </div>

                    <ul class="ans-list">
                      <li><strong><code>hosts</code></strong> – inventory group or pattern.</li>
                      <li><strong><code>become</code></strong> – use privilege escalation (sudo).</li>
                      <li><strong><code>pre_tasks</code>, <code>roles</code>, <code>post_tasks</code></strong> structure the play.</li>
                    </ul>
                  </div>
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Multi-play playbook</h3>
                    <p>Multiple plays in a single file target different groups in sequence:</p>
                    <div class="ans-code">
                      <code>---
- name: Configure database
  hosts: db
  become: true
  roles:
    - db_hardening
    - db_server

- name: Configure web tier
  hosts: web
  become: true
  roles:
    - web_hardening
    - web_app</code>
                    </div>
                    <p class="ans-note">
                      Think of a playbook as a <em>workflow</em>, and each play as a chapter in that
                      workflow.
                    </p>
                  </div>
                </div>
              </section>

              <!-- 5. TASKS & MODULES -->
              <section id="ans-tasks-modules" class="ans-section">
                <div class="ans-section-header">
                  <h2>5. Tasks, Modules &amp; Plugins</h2>
                  <span class="ans-badge">Action Engine</span>
                </div>
                <p class="ans-tagline">
                  Tasks are individual steps in a play; modules are the building blocks that actually
                  do the work (install packages, manage files, call cloud APIs, etc.).
                </p>

                <div class="ans-columns">
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Basic task anatomy</h3>
                    <div class="ans-code">
                      <code>- name: Ensure nginx is installed
  ansible.builtin.package:
    name: nginx
    state: present

- name: Ensure nginx is running
  ansible.builtin.service:
    name: nginx
    state: started
    enabled: true</code>
                    </div>

                    <ul class="ans-list">
                      <li><strong>name</strong> is human-readable and appears in logs.</li>
                      <li>Module name (e.g., <code>ansible.builtin.service</code>) identifies behavior.</li>
                      <li>Arguments are module-specific and generally idempotent.</li>
                    </ul>
                  </div>
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Module categories</h3>
                    <ul class="ans-list">
                      <li><strong>OS &amp; system:</strong> packages, services, users, groups, files, lineinfile.</li>
                      <li><strong>Cloud:</strong> EC2/VMs, load balancers, security groups, IAM, storage.</li>
                      <li><strong>Network:</strong> routers, switches, firewalls (network_cli, httpapi).</li>
                      <li><strong>Utilities:</strong> URI/HTTP calls, templates, command/shell (careful!), archives.</li>
                    </ul>
                    <p class="ans-note">
                      For governance, prefer dedicated modules over <code>shell</code>/<code>command</code>,
                      so Ansible can track state and changes cleanly.
                    </p>
                  </div>
                </div>
              </section>

              <!-- 6. VARS & TEMPLATES -->
              <section id="ans-vars-templates" class="ans-section">
                <div class="ans-section-header">
                  <h2>6. Variables, Facts &amp; Templates (Jinja2)</h2>
                  <span class="ans-badge">Data &amp; Rendering</span>
                </div>
                <p class="ans-tagline">
                  Variables and templates let you drive environment-specific behavior from a common
                  set of playbooks and roles.
                </p>

                <div class="ans-columns">
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Variable sources</h3>
                    <ul class="ans-list">
                      <li>Inventory vars (<code>group_vars/</code>, <code>host_vars/</code>).</li>
                      <li>Play vars (<code>vars:</code>, <code>vars_files:</code> in playbooks).</li>
                      <li>Role defaults (<code>roles/role_name/defaults/main.yml</code>).</li>
                      <li>Extra vars (<code>-e</code> on CLI, from CI/CD).</li>
                      <li>Facts (<code>ansible_facts</code>) gathered from hosts.</li>
                    </ul>

                    <h3 style="margin:0.4rem 0 0.2rem;">Simple template</h3>
                    <div class="ans-code">
                      <code># templates/nginx.conf.j2
server {
  listen {{ app_port }};
  server_name {{ inventory_hostname }};

  location / {
    proxy_pass http://127.0.0.1:{{ app_backend_port }};
  }
}</code>
                    </div>
                  </div>
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Using the template</h3>
                    <div class="ans-code">
                      <code>- name: Render nginx config
  ansible.builtin.template:
    src: "nginx.conf.j2"
    dest: "/etc/nginx/conf.d/app.conf"
    owner: root
    group: root
    mode: "0644"
  notify: restart nginx</code>
                    </div>

                    <p class="ans-note">
                      Jinja2 supports filters, conditionals, loops, and math. Use it to avoid
                      copy-pasting near-identical configs across environments.
                    </p>
                  </div>
                </div>
              </section>

              <!-- 7. ROLES & COLLECTIONS -->
              <section id="ans-roles-collections" class="ans-section">
                <div class="ans-section-header">
                  <h2>7. Roles, Collections &amp; Folder Layout</h2>
                  <span class="ans-badge">Structure</span>
                </div>
                <p class="ans-tagline">
                  Roles are reusable units of automation; collections are bundles of roles, modules,
                  and plugins. This is where you codify your baselines and patterns.
                </p>

                <div class="ans-columns">
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Typical role layout</h3>
                    <div class="ans-code">
                      <code>roles/
  web_app/
    defaults/
      main.yml
    vars/
      main.yml
    tasks/
      main.yml
    handlers/
      main.yml
    templates/
      nginx.conf.j2
    files/
    meta/
      main.yml</code>
                    </div>

                    <ul class="ans-list">
                      <li><strong>defaults/</strong> – lowest-priority variables.</li>
                      <li><strong>vars/</strong> – higher-priority variables (use sparingly).</li>
                      <li><strong>tasks/</strong> – main logic; usually <code>main.yml</code> includes others.</li>
                      <li><strong>handlers/</strong> – actions triggered by <code>notify</code>.</li>
                      <li><strong>templates/</strong> &amp; <strong>files/</strong> – rendered or copied artifacts.</li>
                    </ul>
                  </div>
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Collections</h3>
                    <p>
                      Collections package roles, modules, and plugins with namespacing (e.g.,
                      <code>community.general</code>, <code>amazon.aws</code>, <code>ansible.posix</code>).
                    </p>
                    <ul class="ans-list">
                      <li>Install via <code>ansible-galaxy collection install &lt;namespace&gt;.&lt;name&gt;</code>.</li>
                      <li>Reference modules as <code>namespace.collection.module</code>.</li>
                      <li>Use collections to version and ship your internal CCoE baselines.</li>
                    </ul>

                    <div class="ans-callout">
                      <strong>Pattern:</strong> build a “baseline” collection with:
                      <br />– CIS hardening roles<br />– logging/monitoring roles<br />– standard agent
                      install roles (EDR, observability, backup)
                      <br />Then call that from project-specific playbooks.
                    </div>
                  </div>
                </div>
              </section>

              <!-- 8. FLOW CONTROL -->
              <section id="ans-flow-control" class="ans-section">
                <div class="ans-section-header">
                  <h2>8. Handlers, Conditionals, Loops &amp; Blocks</h2>
                  <span class="ans-badge">Control Flow</span>
                </div>
                <p class="ans-tagline">
                  Flow control determines when tasks run, on which hosts, and what happens when
                  something changes or fails.
                </p>

                <div class="ans-columns">
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Handlers &amp; notify</h3>
                    <div class="ans-code">
                      <code>- name: Install nginx
  ansible.builtin.package:
    name: nginx
    state: present
  notify: restart nginx

# handlers/main.yml
- name: restart nginx
  ansible.builtin.service:
    name: nginx
    state: restarted</code>
                    </div>
                    <p class="ans-note">
                      Handlers run at the end of the play (or when flushed) and only if notified by
                      tasks that changed. This reduces unnecessary restarts.
                    </p>
                  </div>
                  <div>
                    <h3 style="margin:0.1rem 0 0.2rem;">Conditionals, loops, blocks</h3>
                    <div class="ans-code">
                      <code>- name: Only run on Debian family
  ansible.builtin.apt:
    name: htop
    state: present
  when: ansible_os_family == "Debian"

- name: Create multiple users
  ansible.builtin.user:
    name: "{{ item }}"
    state: present
  loop: "{{ app_users }}"

- name: Group tasks with error handling
  block:
    - name: Do something risky
      ansible.builtin.command: /usr/local/bin/migrate_db
  rescue:
    - name: Roll back
      ansible.builtin.command: /usr/local/bin/rollback_db
  always:
    - name: Log result
      ansible.builtin.debug:
        msg: "Migration attempted"</code>
                    </div>
                  </div>
                </div>
              </section>

              <!-- 9. VAULT -->
              <section id="ans-vault" class="ans-section">
                <div class="ans-section-header">
                  <h2>9. Vault, Secrets &amp; Sensitive Data</h2>
                  <span class="ans-badge">Secrets</span>
                </div>
                <p class="ans-tagline">
                  Ansible Vault lets you encrypt variables and files at rest so they can live in Git
                  without exposing secrets.
                </p>

                <div class="ans-columns">
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Vault basics</h3>
                    <ul class="ans-list">
                      <li>Encrypt a file: <code>ansible-vault encrypt group_vars/prod.yml</code></li>
                      <li>Edit: <code>ansible-vault edit group_vars/prod.yml</code></li>
                      <li>Run playbook: <code>ansible-playbook site.yml --ask-vault-pass</code> (or use vault IDs).</li>
                    </ul>
                    <p class="ans-note">
                      For large programs, integrate Vault with enterprise secret stores (HashiCorp Vault,
                      cloud KMS, etc.) and avoid long-lived static secrets.
                    </p>
                  </div>
                  <div>
                    <div class="ans-callout">
                      <strong>Governance pattern:</strong> keep Terraform and Ansible secrets in
                      the same enterprise secrets system; use Vault or plugins as the “adapter”
                      layer so your playbooks never hard-code credentials.
                    </div>
                  </div>
                </div>
              </section>

              <!-- 10. EXECUTION -->
              <section id="ans-execution" class="ans-section">
                <div class="ans-section-header">
                  <h2>10. Execution Strategies &amp; Performance</h2>
                  <span class="ans-badge">Scale</span>
                </div>
                <p class="ans-tagline">
                  How Ansible runs across fleets: parallelism, ordering, and strategies matter once
                  you move beyond a handful of hosts.
                </p>

                <table class="ans-table">
                  <thead>
                    <tr>
                      <th>Concept</th>
                      <th>What It Does</th>
                      <th>Design Considerations</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><strong>Forks</strong></td>
                      <td>Number of hosts run in parallel (default 5).</td>
                      <td>Increase for big fleets but watch load on control node and SSH endpoints.</td>
                    </tr>
                    <tr>
                      <td><strong>Serial</strong></td>
                      <td>
                        Limit how many hosts in a group are processed at a time (e.g., <code>serial: 10</code>).
                      </td>
                      <td>Use for controlled rolling updates; avoid taking all hosts down at once.</td>
                    </tr>
                    <tr>
                      <td><strong>Strategy</strong></td>
                      <td>
                        Execution strategy (<code>linear</code>, <code>free</code>, or custom).
                      </td>
                      <td><code>free</code> lets hosts run tasks as fast as possible; good for long-running tasks.</td>
                    </tr>
                    <tr>
                      <td><strong>Check mode</strong></td>
                      <td>Dry run (no changes), showing potential changes.</td>
                      <td>Useful for governance and pre-change reviews; not all modules fully support it.</td>
                    </tr>
                  </tbody>
                </table>
              </section>

              <!-- 11. CONTROLLER -->
              <section id="ans-controller" class="ans-section">
                <div class="ans-section-header">
                  <h2>11. AWX / Ansible Automation Controller Patterns</h2>
                  <span class="ans-badge">Control Plane</span>
                </div>
                <p class="ans-tagline">
                  For larger environments, you generally don’t run Ansible directly from laptops. You
                  centralize inventory, credentials, and schedules in an automation controller.
                </p>

                <div class="ans-columns">
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Key objects</h3>
                    <ul class="ans-list">
                      <li><strong>Projects:</strong> Git repos with playbooks and roles.</li>
                      <li><strong>Inventories:</strong> static or dynamic; can be per-env, per-tenant.</li>
                      <li><strong>Credentials:</strong> SSH keys, clouds, Vault, etc.</li>
                      <li><strong>Job templates:</strong> parameterized runs of a playbook.</li>
                      <li><strong>Workflows:</strong> orchestration of multiple job templates.</li>
                    </ul>
                  </div>
                  <div>
                    <div class="ans-callout">
                      <strong>CCoE pattern:</strong> treat Controller as the
                      “orchestration hub” for baselines:
                      <br />– One project for global baselines (CIS, logging, agents).<br />
                      – Separate projects per app or program.<br />
                      – RBAC aligning with environments (dev, test, prod).
                    </div>
                  </div>
                </div>
              </section>

              <!-- 12. CLOUD MODULES -->
              <section id="ans-cloud-modules" class="ans-section">
                <div class="ans-section-header">
                  <h2>12. Cloud &amp; Platform Modules</h2>
                  <span class="ans-badge">Cloud</span>
                </div>
                <p class="ans-tagline">
                  Ansible has rich collections for cloud providers; you choose whether Ansible or
                  Terraform is the primary owner for those APIs.
                </p>

                <table class="ans-table">
                  <thead>
                    <tr>
                      <th>Provider / Stack</th>
                      <th>Collections &amp; Modules</th>
                      <th>Typical Use (in a Terraform + Ansible world)</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><strong>AWS</strong></td>
                      <td>
                        <code>amazon.aws</code>, <code>community.aws</code><br />
                        EC2, ELB/ALB/NLB, S3, IAM, RDS, Route53, etc.
                      </td>
                      <td>
                        Small, operational changes; deployments where full Terraform overhead is not justified;
                        introspecting AWS for dynamic inventory; patching tags; one-off remediation.
                      </td>
                    </tr>
                    <tr>
                      <td><strong>Azure</strong></td>
                      <td>
                        <code>azure.azcollection</code><br />
                        VMs, VNets, NSGs, storage, key vault, etc.
                      </td>
                      <td>
                        Similar to AWS: operational tasks, config changes, integration with platform services.
                      </td>
                    </tr>
                    <tr>
                      <td><strong>GCP</strong></td>
                      <td>
                        <code>google.cloud</code><br />
                        GCE instances, networks, IAM, GCS, etc.
                      </td>
                      <td>
                        On-demand environments, dynamic inventory, small adjustments around Terraform-owned infra.
                      </td>
                    </tr>
                    <tr>
                      <td><strong>Oracle Cloud</strong></td>
                      <td>
                        <code>oracle.oci</code><br />
                        Compute, VCN, block storage, load balancers, etc.
                      </td>
                      <td>
                        OCI host configuration, patching, and operational automation in hybrid environments.
                      </td>
                    </tr>
                    <tr>
                      <td><strong>VMware &amp; traditional DC</strong></td>
                      <td>
                        <code>community.vmware</code>, <code>vmware.vmware_rest</code><br />
                        vSphere, vCenter, ESXi, templates.
                      </td>
                      <td>
                        Provisioning VMs, managing snapshots, integrating on-prem with cloud landing zones, etc.
                      </td>
                    </tr>
                  </tbody>
                </table>

                <p class="ans-note">
                  You can absolutely drive full cloud provisioning with Ansible alone, but for CCoE-style
                  programs, Terraform usually owns infra and Ansible focuses on OS/app layers and operations.
                </p>
              </section>

              <!-- 13. GOLDEN IMAGES & DAY-2 -->
              <section id="ans-golden" class="ans-section">
                <div class="ans-section-header">
                  <h2>13. Golden Images, Hardening &amp; Day-2 Ops</h2>
                  <span class="ans-badge">Patterns</span>
                </div>
                <p class="ans-tagline">
                  This is where Ansible earns its keep in a governance-heavy environment: baselines,
                  golden images, and continuous enforcement of security policy.
                </p>

                <div class="ans-columns">
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Golden image pipeline</h3>
                    <ul class="ans-list">
                      <li>Use Packer (or cloud image builders) + Ansible roles to build base images.</li>
                      <li>Roles: OS hardening (CIS/STIG), logging agents, monitoring agents, base tools.</li>
                      <li>Publish images per environment and per data sensitivity tier (P1/P2/P3).</li>
                    </ul>

                    <h3 style="margin:0.4rem 0 0.2rem;">Continuous hardening</h3>
                    <p>
                      Schedule Ansible runs (via Controller or cron/CI) to re-apply baselines and detect drift:
                    </p>
                    <div class="ans-code">
                      <code>- name: Enforce baseline hardening
  hosts: all_p2_p3
  become: true
  roles:
    - baseline_os
    - baseline_logging
    - baseline_agents</code>
                    </div>
                  </div>
                  <div>
                    <div class="ans-callout">
                      <strong>Impact on governance:</strong>
                      <br />
                      – Map hardening roles to CIS / NIST / ISO control IDs.<br />
                      – Use Ansible facts and check mode to produce evidence for audits.<br />
                      – Tag Ansible runs with environment, app, and data classification (P-levels).
                    </div>
                  </div>
                </div>
              </section>

              <!-- 14. COMPLIANCE -->
              <section id="ans-compliance" class="ans-section">
                <div class="ans-section-header">
                  <h2>14. Compliance &amp; Baselines with Ansible</h2>
                  <span class="ans-badge">Governance</span>
                </div>
                <p class="ans-tagline">
                  Ansible is a practical way to implement and continuously enforce the control
                  requirements you’ve mapped from HIPAA, PCI, FISMA, etc., into frameworks like NIST,
                  ISO, and CIS.
                </p>

                <table class="ans-table">
                  <thead>
                    <tr>
                      <th>Governance Need</th>
                      <th>Example Ansible Approach</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>OS hardening for P3 (PHI/card data, CJIS)</td>
                      <td>
                        CIS or STIG roles applied to P3 hosts; separate roles for Linux/Windows; use tags to
                        selectively run <code>hardening</code> in maintenance windows.
                      </td>
                    </tr>
                    <tr>
                      <td>Logging required by HIPAA / PCI / FedRAMP / CJIS</td>
                      <td>
                        Baseline logging role that configures systemd journald, syslog, auditd, and forwards
                        to a central SIEM; validated via check mode and facts.
                      </td>
                    </tr>
                    <tr>
                      <td>Key and secret hygiene</td>
                      <td>
                        Playbooks that rotate credentials, update app configs, and verify that old credentials
                        are disabled; integrate with Vault/KMS APIs.
                      </td>
                    </tr>
                    <tr>
                      <td>Evidence for SOC 2 / ISO / NIST audits</td>
                      <td>
                        Use Ansible to collect configs, versions, and security settings into reports; store
                        artifacts per run for review (e.g., JSON facts exports).
                      </td>
                    </tr>
                  </tbody>
                </table>

                <p class="ans-note">
                  Link this back to <code>governances.html</code>: for each regulation and framework,
                  identify which parts can be technically enforced via Ansible roles and which are
                  procedural (training, policy, etc.).
                </p>
              </section>

              <!-- 15. TESTING & CI/CD -->
              <section id="ans-testing" class="ans-section">
                <div class="ans-section-header">
                  <h2>15. Linting, Testing &amp; CI/CD</h2>
                  <span class="ans-badge">Quality</span>
                </div>
                <p class="ans-tagline">
                  Treat Ansible code like application code: lint it, test it, and run it through CI/CD
                  pipelines before it touches production.
                </p>

                <div class="ans-columns">
                  <div>
                    <h3 style="margin:0 0 0.2rem;">Linting</h3>
                    <ul class="ans-list">
                      <li><code>ansible-lint</code> for style and best-practice checks.</li>
                      <li><code>yamllint</code> to catch syntax and formatting issues.</li>
                    </ul>

                    <h3 style="margin:0.4rem 0 0.2rem;">Molecule testing</h3>
                    <p>
                      Molecule lets you test roles in isolation with containers or VMs:
                    </p>
                    <ul class="ans-list">
                      <li>Converge scenario (apply role).</li>
                      <li>Verify scenario (assert final state).</li>
                      <li>Destroy scenario (cleanup).</li>
                    </ul>
                  </div>
                  <div>
                    <h3 style="margin:0 0 0.2rem;">CI/CD integration</h3>
                    <ul class="ans-list">
                      <li>Run linters and Molecule on every merge request.</li>
                      <li>Use environment-specific pipelines (dev → test → prod).</li>
                      <li>Integrate with automation controller via API for approvals and scheduling.</li>
                    </ul>

                    <div class="ans-callout">
                      <strong>Pattern:</strong> keep Terraform and Ansible pipelines aligned:
                      <br />– Terraform validates and plans infra changes.<br />
                      – Ansible validates and tests configuration changes.<br />
                      – Both report into the same change management and evidence store.
                    </div>
                  </div>
                </div>
              </section>

              <!-- 16. COMMAND & MODULE DICTIONARY -->
              <section id="ans-dictionary" class="ans-section">
                <div class="ans-section-header">
                  <h2>16. Command &amp; Module Dictionary</h2>
                  <span class="ans-badge">Quick Reference</span>
                </div>
                <p class="ans-tagline">
                  A practical dictionary of Ansible CLI commands and the most commonly used modules,
                  grouped by what you use them for. This won’t list literally every module in the
                  universe, but it covers the ones you keep reaching for in real architectures.
                </p>

                <h3 style="margin:0.2rem 0 0.3rem;">16.1 CLI Commands</h3>
                <table class="ans-table">
                  <thead>
                    <tr>
                      <th>Command</th>
                      <th>What It Does</th>
                      <th>Typical Use</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>ansible</code></td>
                      <td>Runs ad-hoc tasks directly against inventory hosts.</td>
                      <td>
                        Quick one-off commands (e.g., <code>ansible web -m ping</code>) or simple changes
                        without writing a playbook (use sparingly in production).
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible-playbook</code></td>
                      <td>Executes YAML playbooks (the main way to use Ansible).</td>
                      <td>
                        Run your automation workflows, deploy apps, apply baselines. Supports
                        <code>--limit</code>, <code>--tags</code>, <code>--check</code>, <code>--diff</code>, etc.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible-galaxy</code></td>
                      <td>Manages roles and collections from Ansible Galaxy or private repos.</td>
                      <td>
                        <code>ansible-galaxy collection install</code> to pull cloud collections; publish and
                        version your internal CCoE baselines.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible-vault</code></td>
                      <td>Encrypts / decrypts files and vars (Vault).</td>
                      <td>
                        Securely store secrets in Git. Encrypt <code>group_vars</code>, edit them,
                        rotate keys, etc.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible-doc</code></td>
                      <td>Shows documentation for modules, plugins and collections.</td>
                      <td>
                        <code>ansible-doc ansible.builtin.service</code> to see params, examples, and return values
                        directly from the CLI.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible-config</code></td>
                      <td>Views and manages Ansible configuration settings.</td>
                      <td>
                        Check which config file is active, see current values, understand how env vars/CLI
                        flags override config.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible-lint</code></td>
                      <td>Lints playbooks, roles, and tasks for best practices.</td>
                      <td>
                        Wire into CI pipelines to catch bad patterns, deprecated modules, and style issues
                        before merging.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible-navigator</code></td>
                      <td>TUI/CLI wrapper for running playbooks, validating content, exploring inventories.</td>
                      <td>
                        Modern way to interact with projects, especially in Automation Platform environments.
                      </td>
                    </tr>
                    <tr>
                      <td><code>awx</code> / <code>tower-cli</code> (legacy)</td>
                      <td>CLI for AWX/Ansible Tower / Automation Controller (where used).</td>
                      <td>
                        Manage projects, inventories, credentials, and job templates programmatically from scripts
                        or CI/CD.
                      </td>
                    </tr>
                  </tbody>
                </table>

                <p class="ans-note">
                  For each CLI command, treat it as a building block you can script around. Governance comes
                  from <em>how</em> you wrap these in pipelines and approval flows.
                </p>

                <h3 style="margin:0.8rem 0 0.3rem;">16.2 Core Built-in Modules (OS &amp; Files)</h3>
                <table class="ans-table">
                  <thead>
                    <tr>
                      <th>Module</th>
                      <th>Type / Category</th>
                      <th>What It Does / When To Use</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>ansible.builtin.package</code></td>
                      <td>Package management (generic)</td>
                      <td>
                        Abstract interface over OS package managers (apt, yum, dnf, zypper, etc.). Use when you
                        want cross-distro playbooks that just say “install this package”.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.apt</code></td>
                      <td>Package management (Debian/Ubuntu)</td>
                      <td>
                        Directly use apt features: caches, state, upgrades; good when you need apt-specific options.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.yum</code> / <code>dnf</code></td>
                      <td>Package management (RHEL/CentOS/Fedora)</td>
                      <td>
                        Manage RPM packages; pin versions; handle repos for RHEL-based distros.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.service</code></td>
                      <td>Service management</td>
                      <td>
                        Start/stop/restart and enable services. Core for keeping daemons running (nginx, sshd,
                        app services, etc.).
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.user</code></td>
                      <td>User accounts</td>
                      <td>
                        Create, modify, and remove system users; manage shells, home dirs, passwords, groups.
                        Map to least-privilege controls.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.group</code></td>
                      <td>Groups</td>
                      <td>
                        Manage local groups; often used with <code>user</code> to enforce local RBAC patterns.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.file</code></td>
                      <td>Filesystem / attributes</td>
                      <td>
                        Ensure files/directories/symlinks exist or are absent; set ownership, permissions,
                        SELinux context. Core for CIS/STIG enforcement.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.copy</code></td>
                      <td>File content</td>
                      <td>
                        Copy static files from the control node to managed nodes. Use for simple config files
                        that don’t need templating.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.template</code></td>
                      <td>File content (templated)</td>
                      <td>
                        Render Jinja2 templates using vars/facts. Use whenever config depends on environment,
                        host, or secrets.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.lineinfile</code></td>
                      <td>Config tweaking</td>
                      <td>
                        Ensure a specific line is present/absent or matches a regex in a file. Good for minor
                        config adjustments where full templating isn’t worth it.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.blockinfile</code></td>
                      <td>Config blocks</td>
                      <td>
                        Manage a multi-line block of text in a file; great for inserting managed sections in
                        config files and leaving the rest alone.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.shell</code> / <code>command</code></td>
                      <td>Raw command execution</td>
                      <td>
                        Run arbitrary commands. Use only when there is no dedicated module, and be careful
                        with idempotence and quoting (prefer <code>command</code> when you don’t need a shell).
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.debug</code></td>
                      <td>Logging / output</td>
                      <td>
                        Print messages or variable values for debugging. Also useful to emit evidence into logs
                        for governance.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.stat</code></td>
                      <td>File/dir facts</td>
                      <td>
                        Gather info (exists, size, hashes, permissions) about paths. Combine with <code>when</code>
                        for conditional logic.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.unarchive</code></td>
                      <td>Archives</td>
                      <td>
                        Unpack tar/zip/etc. archives locally or remotely, with optional remote_source; useful for
                        installing apps from tarballs.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.get_url</code></td>
                      <td>HTTP/HTTPS download</td>
                      <td>
                        Download files from URLs to the target; good for fetching artifacts from web servers,
                        object storage, or artifact repos.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.git</code></td>
                      <td>Source code / repos</td>
                      <td>
                        Clone or update Git repos on managed hosts; version-pin dependencies or app code.
                      </td>
                    </tr>
                  </tbody>
                </table>

                <h3 style="margin:0.8rem 0 0.3rem;">16.3 Control &amp; Flow Modules</h3>
                <table class="ans-table">
                  <thead>
                    <tr>
                      <th>Module</th>
                      <th>Type</th>
                      <th>What It Does / When To Use</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>ansible.builtin.include_role</code> / <code>import_role</code></td>
                      <td>Role inclusion</td>
                      <td>
                        Dynamically or statically include roles inside tasks; allows you to parameterize role use
                        or conditionally run roles.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.include_tasks</code> / <code>import_tasks</code></td>
                      <td>Task inclusion</td>
                      <td>
                        Split large roles/playbooks into multiple files; reuse sequences of tasks across plays
                        with conditions.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.set_fact</code></td>
                      <td>Dynamic variables</td>
                      <td>
                        Create or update host-level variables during a run, based on calculations or lookup results.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.assert</code></td>
                      <td>Validation</td>
                      <td>
                        Fail early if assumptions aren’t met (e.g., required vars missing, conditions not satisfied);
                        great for governance and guardrails.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.wait_for</code></td>
                      <td>Readiness</td>
                      <td>
                        Wait for ports, files, or conditions (e.g., service listening on port 443) before moving on;
                        helps orchestrate multi-tier rollouts.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.uri</code></td>
                      <td>HTTP/REST</td>
                      <td>
                        Call HTTP(S) APIs; integrate with cloud APIs, CMDBs, or governance systems when a dedicated
                        module doesn’t exist.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.builtin.fetch</code></td>
                      <td>File collection</td>
                      <td>
                        Copy files from remote hosts back to the control node (logs, configs, evidence) for
                        troubleshooting and audits.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.posix.synchronize</code></td>
                      <td>Efficient sync</td>
                      <td>
                        rsync wrapper; efficient for syncing directories between control node and managed hosts
                        (or between hosts) at scale.
                      </td>
                    </tr>
                  </tbody>
                </table>

                <h3 style="margin:0.8rem 0 0.3rem;">16.4 Cloud &amp; Governance-Relevant Modules (Examples)</h3>
                <table class="ans-table">
                  <thead>
                    <tr>
                      <th>Module (Collection)</th>
                      <th>What It Controls</th>
                      <th>Why It Matters for Governance</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><code>amazon.aws.ec2_instance</code></td>
                      <td>Provision and manage EC2 instances.</td>
                      <td>
                        Used for patching, emergency remediation, or maintenance actions when you must touch
                        instances directly (though Terraform typically owns infra).
                      </td>
                    </tr>
                    <tr>
                      <td><code>amazon.aws.ec2_group</code></td>
                      <td>Security groups (AWS).</td>
                      <td>
                        Tighten or audit SG rules in response to findings; can be used for emergency changes
                        while Terraform is updated later.
                      </td>
                    </tr>
                    <tr>
                      <td><code>azure.azcollection.azure_rm_virtualmachine</code></td>
                      <td>Azure VMs lifecycle.</td>
                      <td>
                        Similar use to EC2: patching and operational activities around Terraform-managed VMs.
                      </td>
                    </tr>
                    <tr>
                      <td><code>google.cloud.gce_instance</code></td>
                      <td>GCE compute instances.</td>
                      <td>
                        GCP fleet operations and patching for hosts in P2/P3 environments.
                      </td>
                    </tr>
                    <tr>
                      <td><code>oracle.oci.oci_compute_instance</code></td>
                      <td>OCI compute instances.</td>
                      <td>
                        Hybrid/OCI workloads; apply hardening roles and agent installs programmatically.
                      </td>
                    </tr>
                    <tr>
                      <td><code>community.general.timezone</code></td>
                      <td>System timezone</td>
                      <td>
                        Enforce consistent time settings across fleets for log correlation and incident response.
                      </td>
                    </tr>
                    <tr>
                      <td><code>community.general.seboolean</code></td>
                      <td>SELinux booleans</td>
                      <td>
                        Align SELinux settings with STIG/CIS controls; important in high-assurance environments.
                      </td>
                    </tr>
                    <tr>
                      <td><code>ansible.posix.firewalld</code></td>
                      <td>firewalld configuration</td>
                      <td>
                        Enforce host-level firewalls; good for defense-in-depth beyond cloud security groups.
                      </td>
                    </tr>
                  </tbody>
                </table>

                <p class="ans-note">
                  Treat this dictionary as a living thing: extend it whenever you standardize on
                  new modules or patterns. The rule of thumb is: if engineers keep Googling “how do we
                  do X in Ansible?”, it probably deserves a row here.
                </p>
              </section>
            </main>
          </div>
        </section>

        <div class="footnote">
          Save this file as <code>ansible.html</code> next to <code>index.html</code>. It is designed
          to match the look and feel of your Terraform and Governance workspaces.
        </div>
      </div>
    </div>
  </div>
</body>
</html>
