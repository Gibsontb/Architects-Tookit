<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Terraform Encyclopedia · Architect's Toolkit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color-scheme: dark light;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at top, #1a2735, #050608 60%);
      color: #f5f5f5;
      display: flex;
      align-items: stretch;
      justify-content: center;
    }

    .shell {
      flex: 1;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 2rem;
      box-sizing: border-box;
    }

    .card {
      width: 100%;
      max-width: 1100px;
      background: rgba(0, 0, 0, 0.55);
      border-radius: 16px;
      padding: 1.25rem 1.5rem 1.5rem;
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.65);
      border: 1px solid rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(14px);
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 0.25rem;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
      min-width: 0;
    }

    h1.page-title {
      margin: 0;
      font-size: 1.4rem;
      font-weight: 600;
      outline: none;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    h1.page-title[contenteditable="true"] {
      cursor: text;
    }

    .page-title-hint {
      font-size: 0.75rem;
      color: #9ca3af;
    }

    .main-menu-btn {
      border-radius: 999px;
      border: 1px solid #1f2937;
      padding: 0.35rem 0.95rem;
      font-size: 0.78rem;
      background: #020617;
      color: #9ca3af;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      transition:
        background 0.12s ease,
        border-color 0.12s ease,
        color 0.12s ease,
        transform 0.05s ease;
      white-space: nowrap;
    }

    .main-menu-btn:hover {
      background: #111827;
      border-color: #2563eb;
      color: #e5e7eb;
      transform: translateY(-1px);
    }

    .workspace {
      flex: 1;
      margin-top: 0.25rem;
      border-radius: 0.9rem;
      border: 1px dashed rgba(148, 163, 184, 0.6);
      padding: 0;
      font-size: 0.9rem;
      color: #e5e7eb;
      display: flex;
      align-items: stretch;
      justify-content: stretch;
      min-height: 480px;
      box-sizing: border-box;
      background: radial-gradient(circle at top left, rgba(37,99,235,0.14), transparent 55%);
      overflow: hidden;
    }

    .footer-note {
      margin-top: 0.5rem;
      font-size: 0.78rem;
      color: #9ca3af;
      text-align: right;
    }

    /* Terraform encyclopedia layout */

    .tf-layout {
      display: flex;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
    }

    .tf-nav {
      width: 230px;
      min-width: 200px;
      max-width: 260px;
      border-right: 1px solid rgba(148, 163, 184, 0.35);
      padding: 1rem;
      box-sizing: border-box;
      backdrop-filter: blur(18px);
      background: linear-gradient(180deg, rgba(15,23,42,0.7), rgba(15,23,42,0.35));
      overflow-y: auto;
    }

    .tf-nav h2 {
      margin: 0 0 0.4rem 0;
      font-size: 1rem;
      font-weight: 600;
    }

    .tf-nav p {
      margin: 0 0 0.75rem 0;
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .tf-nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      font-size: 0.83rem;
    }

    .tf-nav li {
      margin: 0;
    }

    .tf-nav a {
      color: #cbd5f5;
      text-decoration: none;
      display: block;
      padding: 0.22rem 0.4rem;
      border-radius: 999px;
      transition: background 0.12s ease, color 0.12s ease, transform 0.04s ease;
    }

    .tf-nav a:hover {
      background: rgba(37, 99, 235, 0.25);
      color: #eff6ff;
      transform: translateX(1px);
    }

    .tf-nav-section-label {
      margin-top: 0.7rem;
      margin-bottom: 0.25rem;
      font-size: 0.72rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #6b7280;
    }

    .tf-content {
      flex: 1;
      padding: 1rem 1.25rem 1rem;
      box-sizing: border-box;
      overflow-y: auto;
    }

    .tf-content h2 {
      margin-top: 0;
      font-size: 1.1rem;
      font-weight: 600;
    }

    .tf-section {
      margin-bottom: 1.6rem;
      padding-bottom: 1.1rem;
      border-bottom: 1px dashed rgba(148, 163, 184, 0.4);
    }

    .tf-section:last-of-type {
      border-bottom: none;
      margin-bottom: 0.2rem;
      padding-bottom: 0.2rem;
    }

    .tf-section-header {
      display: flex;
      align-items: baseline;
      gap: 0.4rem;
      margin-bottom: 0.25rem;
    }

    .tf-section-header h2 {
      margin: 0;
    }

    .tf-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.05rem 0.4rem;
      font-size: 0.65rem;
      border-radius: 999px;
      border: 1px solid rgba(96,165,250,0.7);
      color: #bfdbfe;
      background: rgba(15,23,42,0.9);
      text-transform: uppercase;
      letter-spacing: 0.04em;
      white-space: nowrap;
    }

    .tf-tagline {
      font-size: 0.85rem;
      color: #9ca3af;
      margin: 0.35rem 0 0.5rem;
    }

    .tf-columns {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 1.1rem;
    }

    .tf-pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
      margin-top: 0.4rem;
    }

    .tf-pill {
      padding: 0.12rem 0.48rem;
      border-radius: 999px;
      font-size: 0.72rem;
      border: 1px solid rgba(156, 163, 175, 0.7);
      color: #e5e7eb;
      white-space: nowrap;
    }

    .tf-pill--primary {
      border-color: rgba(59,130,246,0.9);
      color: #dbeafe;
    }

    .tf-callout {
      font-size: 0.8rem;
      border-radius: 0.6rem;
      padding: 0.55rem 0.7rem;
      border: 1px solid rgba(59,130,246,0.8);
      background: radial-gradient(circle at top left, rgba(37,99,235,0.33), rgba(15,23,42,0.9));
      color: #e5e7eb;
      margin-top: 0.5rem;
    }

    .tf-callout strong {
      font-weight: 600;
      color: #bfdbfe;
    }

    details.tf-details {
      border-radius: 0.7rem;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15,23,42,0.82);
      padding: 0.5rem 0.75rem 0.6rem;
      font-size: 0.83rem;
      margin-top: 0.55rem;
    }

    details.tf-details > summary {
      cursor: pointer;
      list-style: none;
      outline: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    details.tf-details > summary::-webkit-details-marker {
      display: none;
    }

    .tf-summary-text {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    .tf-summary-label {
      font-weight: 500;
    }

    .tf-summary-meta {
      font-size: 0.7rem;
      color: #9ca3af;
    }

    .tf-details-body {
      margin-top: 0.55rem;
      border-top: 1px dashed rgba(55, 65, 81, 0.9);
      padding-top: 0.45rem;
      display: grid;
      gap: 0.4rem;
    }

    .tf-kv {
      display: grid;
      grid-template-columns: minmax(0, 0.55fr) minmax(0, 1fr);
      gap: 0.4rem;
      font-size: 0.8rem;
    }

    .tf-kv dt {
      font-weight: 500;
      color: #d1d5db;
    }

    .tf-kv dd {
      margin: 0;
      color: #9ca3af;
    }

    .tf-code {
      margin-top: 0.4rem;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.78rem;
      background: #020617;
      border-radius: 0.6rem;
      padding: 0.55rem 0.65rem;
      border: 1px solid rgba(31, 41, 55, 0.9);
      overflow-x: auto;
      line-height: 1.35;
    }

    .tf-code code {
      white-space: pre;
    }

    .tf-list {
      margin: 0.35rem 0 0.2rem;
      padding-left: 1.1rem;
      font-size: 0.82rem;
    }

    .tf-list li {
      margin-bottom: 0.12rem;
    }

    .tf-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.78rem;
      margin-top: 0.45rem;
      border-radius: 0.6rem;
      overflow: hidden;
    }

    .tf-table thead {
      background: rgba(15,23,42, 0.9);
    }

    .tf-table th,
    .tf-table td {
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 0.35rem 0.45rem;
      text-align: left;
    }

    .tf-table th {
      font-weight: 600;
      color: #e5e7eb;
    }

    .tf-table td {
      color: #d1d5db;
    }

    .tf-breadcrumb {
      font-size: 0.78rem;
      color: #9ca3af;
      margin-bottom: 0.3rem;
    }

    .tf-breadcrumb span {
      opacity: 0.9;
    }

    .tf-highlight {
      font-weight: 500;
      color: #e5e7eb;
    }

    .tf-usecase-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
      gap: 0.6rem;
      margin-top: 0.45rem;
    }

    .tf-usecase-card {
      border-radius: 0.7rem;
      border: 1px solid rgba(75, 85, 99, 0.9);
      padding: 0.5rem 0.6rem;
      font-size: 0.8rem;
      background: rgba(15,23,42,0.9);
    }

    .tf-usecase-card h3 {
      margin: 0 0 0.25rem 0;
      font-size: 0.86rem;
    }

    .tf-usecase-card p {
      margin: 0;
      color: #9ca3af;
    }

    .tf-usecase-tags {
      margin-top: 0.35rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.25rem;
    }

    .tf-usecase-tags span {
      font-size: 0.7rem;
      border-radius: 999px;
      padding: 0.05rem 0.4rem;
      border: 1px solid rgba(55, 65, 81, 0.9);
      color: #e5e7eb;
    }

    .tf-note {
      font-size: 0.76rem;
      color: #9ca3af;
      margin-top: 0.4rem;
    }

    /* Link buttons for deep dives */
    .tf-link-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 0.7rem;
      margin-top: 0.6rem;
    }

    .tf-link-card {
      border-radius: 0.8rem;
      border: 1px solid rgba(59,130,246,0.5);
      background: radial-gradient(circle at top left, rgba(37,99,235,0.25), rgba(15,23,42,0.95));
      padding: 0.65rem 0.75rem;
      font-size: 0.82rem;
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .tf-link-card-title {
      font-weight: 600;
    }

    .tf-link-card a {
      margin-top: 0.25rem;
      align-self: flex-start;
      font-size: 0.78rem;
      border-radius: 999px;
      padding: 0.25rem 0.7rem;
      border: 1px solid rgba(191,219,254,0.9);
      color: #bfdbfe;
      text-decoration: none;
      background: #020617;
      transition:
        background 0.12s ease,
        border-color 0.12s ease,
        color 0.12s ease,
        transform 0.05s ease;
    }

    .tf-link-card a:hover {
      background: #111827;
      border-color: #60a5fa;
      color: #eff6ff;
      transform: translateY(-1px);
    }

    @media (max-width: 900px) {
      .tf-layout {
        flex-direction: column;
      }
      .tf-nav {
        width: 100%;
        max-width: 100%;
        border-right: none;
        border-bottom: 1px solid rgba(148, 163, 184, 0.35);
      }
    }

    @media (max-width: 700px) {
      .shell {
        padding: 1.25rem;
      }
      .card {
        padding: 1rem 1rem 1.25rem;
      }
      header {
        align-items: flex-start;
        flex-direction: column;
      }
      .footer-note {
        text-align: left;
      }
      .tf-columns {
        grid-template-columns: minmax(0, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="card">
      <header>
        <div class="title-block">
          <h1 class="page-title" contenteditable="true" spellcheck="false">Terraform Encyclopedia · Architect's Toolkit</h1>
          <div class="page-title-hint">Rename this page to match a specific cloud, app, or project.</div>
        </div>
        <button
          class="main-menu-btn"
          type="button"
          onclick="window.location.href='index.html'">
          ← Main menu
        </button>
      </header>

      <section class="workspace">
        <div class="tf-layout">
          <nav class="tf-nav">
            <h2>Terraform Encyclopedia</h2>
            <p>Language, options, patterns – grouped by what you actually use them for.</p>

            <div class="tf-nav-section-label">Core Language</div>
            <ul>
              <li><a href="#tf-overview">1. Overview & Mental Model</a></li>
              <li><a href="#tf-blocks">2. Core Blocks</a></li>
              <li><a href="#tf-meta">3. Meta-Arguments</a></li>
              <li><a href="#tf-vars">4. Variables & Types</a></li>
              <li><a href="#tf-funcs">5. Expressions & Functions</a></li>
            </ul>

            <div class="tf-nav-section-label">Architecture Use-Cases</div>
            <ul>
              <li><a href="#tf-providers">6. Providers by Domain</a></li>
              <li><a href="#tf-modules">7. Modules & Reuse</a></li>
              <li><a href="#tf-state">8. State & Backends</a></li>
              <li><a href="#tf-workflows">9. Plans, Envs, CI/CD</a></li>
              <li><a href="#tf-usecases">10. Quick Use-Case Index</a></li>
            </ul>

            <div class="tf-nav-section-label">Cloud Deep Dives</div>
            <ul>
              <li><a href="#tf-aws">11. AWS Terraform Map</a></li>
              <li><a href="#tf-azure">12. Azure Terraform Map</a></li>
              <li><a href="#tf-gcp">13. GCP Terraform Map</a></li>
              <li><a href="#tf-oracle">14. Oracle Cloud Terraform Map</a></li>
              <li><a href="#tf-ccoe-maps">15. CCoE Decision Maps</a></li>
              <li><a href="#tf-deep-dives">16. Cloud Playbooks & Drilldowns</a></li>
            </ul>
          </nav>

          <main class="tf-content">
            <!-- 1. OVERVIEW -->
            <section id="tf-overview" class="tf-section">
              <div class="tf-section-header">
                <h2>1. Terraform Overview & Mental Model</h2>
                <span class="tf-badge">Core</span>
              </div>
              <p class="tf-tagline">
                Terraform describes <span class="tf-highlight">desired infrastructure state</span> using HCL.
                The engine compares that desired state to real cloud state and generates a plan of actions
                (create, update, destroy) to converge the two.
              </p>

              <div class="tf-columns">
                <div>
                  <ul class="tf-list">
                    <li><strong>Configuration</strong>: HCL files – what you write.</li>
                    <li><strong>State</strong>: Snapshot of what exists in reality.</li>
                    <li><strong>Plan</strong>: Delta between config vs. state.</li>
                    <li><strong>Apply</strong>: Terraform calling provider APIs to make reality match config.</li>
                  </ul>

                  <div class="tf-pill-row">
                    <span class="tf-pill tf-pill--primary">Config = intent</span>
                    <span class="tf-pill">State = memory</span>
                    <span class="tf-pill">Providers = cloud adapters</span>
                    <span class="tf-pill">Modules = reusable blueprints</span>
                  </div>
                </div>
                <div>
                  <div class="tf-callout">
                    <strong>Architect’s angle:</strong> treat Terraform as the single
                    <em>infrastructure source of truth</em>. Your CCoE and cloud decision logic
                    live on top of this: patterns decide <em>what</em> you build, Terraform
                    decides <em>how</em> to materialize it consistently.
                  </div>
                </div>
              </div>
            </section>

            <!-- 2. CORE BLOCKS -->
            <section id="tf-blocks" class="tf-section">
              <div class="tf-section-header">
                <h2>2. Core Terraform Blocks (All Options)</h2>
                <span class="tf-badge">Language</span>
              </div>
              <p class="tf-tagline">
                Blocks are the top-level “shapes” of Terraform. Every line of HCL lives inside one of these.
              </p>

              <details class="tf-details" open>
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label"><code>terraform</code> Block</span>
                    <span class="tf-summary-meta">Core settings: required version, backends, experiments.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <dl class="tf-kv">
                    <dt>Used for</dt>
                    <dd>Global configuration, required Terraform version, required providers, backend.</dd>
                    <dt>Where</dt>
                    <dd>Typically in <code>main.tf</code> or <code>versions.tf</code> at the root of the project.</dd>
                  </dl>
                  <div class="tf-code">
                    <code>terraform {
  required_version = "&gt;= 1.5.0"

  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~&gt; 5.0"
    }
  }

  backend "s3" {
    bucket         = "ccoe-terraform-state"
    key            = "networking/global.tfstate"
    region         = "us-east-1"
    dynamodb_table = "terraform-locks"
  }
}</code>
                  </div>
                </div>
              </details>

              <details class="tf-details">
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label"><code>provider</code> Block</span>
                    <span class="tf-summary-meta">Tells Terraform how to talk to a cloud/API.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <dl class="tf-kv">
                    <dt>Used for</dt>
                    <dd>Configure credentials, regions, and other provider-wide defaults.</dd>
                    <dt>Alias support</dt>
                    <dd>Use <code>alias</code> for multi-region, multi-account, or multi-cloud patterns.</dd>
                  </dl>
                  <div class="tf-code">
                    <code>provider "aws" {
  region = "us-east-1"
}

provider "aws" {
  alias  = "central"
  region = "us-east-2"
}</code>
                  </div>
                </div>
              </details>

              <details class="tf-details">
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label"><code>resource</code> Block</span>
                    <span class="tf-summary-meta">Create/update/delete real infrastructure.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <dl class="tf-kv">
                    <dt>Used for</dt>
                    <dd>Anything that exists in the cloud: VPCs, subnets, VMs, DBs, users, policies.</dd>
                    <dt>Shape</dt>
                    <dd><code>resource "TYPE" "NAME" { ... }</code> – type from provider, name is local handle.</dd>
                  </dl>
                  <div class="tf-code">
                    <code>resource "aws_vpc" "core" {
  cidr_block           = "10.10.0.0/16"
  enable_dns_support   = true
  enable_dns_hostnames = true

  tags = {
    Name = "ccoe-core"
  }
}</code>
                  </div>
                </div>
              </details>

              <details class="tf-details">
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label"><code>data</code> Block</span>
                    <span class="tf-summary-meta">Read-only lookup of existing things.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <dl class="tf-kv">
                    <dt>Used for</dt>
                    <dd>Query existing AMIs, VPCs, IAM roles, etc. without managing their lifecycle.</dd>
                    <dt>Pattern</dt>
                    <dd>Use data sources to avoid hard-coding IDs and to plug into existing estates.</dd>
                  </dl>
                  <div class="tf-code">
                    <code>data "aws_ami" "latest_al2" {
  most_recent = true

  filter {
    name   = "name"
    values = ["al2023-ami-*-x86_64"]
  }

  owners = ["amazon"]
}</code>
                  </div>
                </div>
              </details>

              <details class="tf-details">
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label"><code>variable</code> Block</span>
                    <span class="tf-summary-meta">Parameters for your modules / root config.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <dl class="tf-kv">
                    <dt>Used for</dt>
                    <dd>Allow different values per environment, per workspace, or per caller module.</dd>
                    <dt>Key options</dt>
                    <dd><code>type</code>, <code>default</code>, <code>description</code>, <code>sensitive</code>, <code>nullable</code>, validation.</dd>
                  </dl>
                  <div class="tf-code">
                    <code>variable "environment" {
  type        = string
  description = "Deployment environment (dev, test, prod)"
  default     = "dev"

  validation {
    condition     = contains(["dev", "test", "prod"], var.environment)
    error_message = "Environment must be dev, test, or prod."
  }
}</code>
                  </div>
                </div>
              </details>

              <details class="tf-details">
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label"><code>output</code> Block</span>
                    <span class="tf-summary-meta">Export values from a module / root config.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <dl class="tf-kv">
                    <dt>Used for</dt>
                    <dd>Expose connection info, IDs, or URLs to callers, CI/CD, or humans.</dd>
                    <dt>Options</dt>
                    <dd><code>sensitive</code>, <code>description</code>, <code>depends_on</code> (rarely).</dd>
                  </dl>
                  <div class="tf-code">
                    <code>output "vpc_id" {
  value       = aws_vpc.core.id
  description = "The ID of the core VPC."
}</code>
                  </div>
                </div>
              </details>

              <details class="tf-details">
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label"><code>locals</code> Block</span>
                    <span class="tf-summary-meta">Reusable computed values.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <dl class="tf-kv">
                    <dt>Used for</dt>
                    <dd>DRYing up repeated expressions, building derived structures.</dd>
                    <dt>Access</dt>
                    <dd>Refer via <code>local.NAME</code> and <code>locals { ... }</code> scope.</dd>
                  </dl>
                  <div class="tf-code">
                    <code>locals {
  name_prefix = "${var.environment}-core"
  az_list     = ["us-east-1a", "us-east-1b", "us-east-1c"]
}</code>
                  </div>
                </div>
              </details>

              <details class="tf-details">
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label"><code>module</code> Block</span>
                    <span class="tf-summary-meta">Reusable composition unit (your blueprints).</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <dl class="tf-kv">
                    <dt>Used for</dt>
                    <dd>Call other configurations, pass in variables, receive outputs.</dd>
                    <dt>Sources</dt>
                    <dd>Local path, git repo, registry (<code>app/ccoe/network/vpc</code>), archive, etc.</dd>
                  </dl>
                  <div class="tf-code">
                    <code>module "network" {
  source      = "appcorp/landing-zone/aws"
  version     = "1.2.0"
  environment = var.environment
}</code>
                  </div>
                </div>
              </details>

              <details class="tf-details">
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label"><code>backend</code>, <code>moved</code>, <code>import</code></span>
                    <span class="tf-summary-meta">Advanced: state & refactoring.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <dl class="tf-kv">
                    <dt><code>backend</code></dt>
                    <dd>Inside <code>terraform {}</code>: configure where state lives (S3, GCS, AzureRM, etc.).</dd>
                    <dt><code>moved</code></dt>
                    <dd>Tell Terraform that a resource address changed (rename / refactors without recreation).</dd>
                    <dt><code>import</code> block</dt>
                    <dd>(Modern syntax) declarative import – map existing resources into state files.</dd>
                  </dl>
                  <div class="tf-code">
                    <code>moved {
  from = aws_instance.web
  to   = aws_instance.frontend
}

import {
  to = aws_s3_bucket.logs
  id = "account-logs-bucket"
}</code>
                  </div>
                </div>
              </details>
            </section>

            <!-- 3. META-ARGUMENTS -->
            <section id="tf-meta" class="tf-section">
              <div class="tf-section-header">
                <h2>3. Meta-Arguments on Resources & Modules</h2>
                <span class="tf-badge">Control</span>
              </div>
              <p class="tf-tagline">
                Meta-arguments modify how a block behaves (counting, iteration, dependencies, lifecycle).
              </p>

              <table class="tf-table">
                <thead>
                  <tr>
                    <th>Meta-Argument</th>
                    <th>Applies To</th>
                    <th>Purpose</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><code>count</code></td>
                    <td>resource, module</td>
                    <td>Create N copies indexed by <code>count.index</code>.</td>
                  </tr>
                  <tr>
                    <td><code>for_each</code></td>
                    <td>resource, module</td>
                    <td>One instance per key/value in a map or set.</td>
                  </tr>
                  <tr>
                    <td><code>depends_on</code></td>
                    <td>resource, module, output</td>
                    <td>Force dependency when not detected automatically.</td>
                  </tr>
                  <tr>
                    <td><code>provider</code></td>
                    <td>resource, module</td>
                    <td>Override which provider alias to use.</td>
                  </tr>
                  <tr>
                    <td><code>lifecycle</code></td>
                    <td>resource</td>
                    <td>Control create/destroy semantics and drift handling.</td>
                  </tr>
                  <tr>
                    <td><code>provisioner</code></td>
                    <td>resource</td>
                    <td>Last-resort remote/local commands (generally avoided in CCoE patterns).</td>
                  </tr>
                </tbody>
              </table>

              <details class="tf-details" open>
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label"><code>count</code> vs <code>for_each</code></span>
                    <span class="tf-summary-meta">Scaling resources & modules.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <div>
                    <strong><code>count</code></strong> – good for “N identical instances”:
                    <div class="tf-code">
                      <code>resource "aws_instance" "web" {
  count         = 3
  ami           = data.aws_ami.latest_al2.id
  instance_type = "t3.micro"

  tags = {
    Name = "web-${count.index}"
  }
}</code>
                    </div>
                  </div>
                  <div>
                    <strong><code>for_each</code></strong> – good for “instances keyed by name / map key”:
                    <div class="tf-code">
                      <code>locals {
  app_servers = {
    api   = "t3.medium"
    web   = "t3.small"
    batch = "t3.large"
  }
}

resource "aws_instance" "app" {
  for_each      = local.app_servers
  ami           = data.aws_ami.latest_al2.id
  instance_type = each.value

  tags = {
    Name = each.key
  }
}</code>
                    </div>
                  </div>
                </div>
              </details>

              <details class="tf-details">
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label"><code>lifecycle</code></span>
                    <span class="tf-summary-meta">Protecting and controlling resource changes.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <ul class="tf-list">
                    <li><code>create_before_destroy</code> – ensure replacement builds first, then old destroyed.</li>
                    <li><code>prevent_destroy</code> – block destroys unless explicitly overridden.</li>
                    <li><code>ignore_changes</code> – ignore certain attributes even if drifted.</li>
                    <li><code>replace_triggered_by</code> – trigger recreation when another resource/attr changes.</li>
                  </ul>
                  <div class="tf-code">
                    <code>resource "aws_s3_bucket" "logs" {
  bucket = "${var.environment}-logs"

  lifecycle {
    prevent_destroy = true
    ignore_changes  = [tags]
  }
}</code>
                  </div>
                </div>
              </details>
            </section>

            <!-- 4. VARIABLES & TYPES -->
            <section id="tf-vars" class="tf-section">
              <div class="tf-section-header">
                <h2>4. Variables, Types & Validation</h2>
                <span class="tf-badge">Inputs</span>
              </div>
              <p class="tf-tagline">
                Variables drive environment differences. Types and validation enforce CCoE standards.
              </p>

              <div class="tf-columns">
                <div>
                  <h3>4.1 Primitive & Collection Types</h3>
                  <ul class="tf-list">
                    <li>Primitive: <code>string</code>, <code>number</code>, <code>bool</code></li>
                    <li>Collections: <code>list(T)</code>, <code>set(T)</code>, <code>map(T)</code></li>
                    <li>Structural: <code>object({ ... })</code>, <code>tuple([ ... ])</code>, <code>any</code></li>
                  </ul>
                  <div class="tf-code">
                    <code>variable "azs" {
  type        = list(string)
  description = "Availability zones to use."
}

variable "tags" {
  type        = map(string)
  description = "Common tags applied to all resources."
}</code>
                  </div>
                </div>
                <div>
                  <h3>4.2 Complex Objects & Validation</h3>
                  <div class="tf-code">
                    <code>variable "service_config" {
  type = object({
    name        = string
    port        = number
    public      = bool
    extra_tags  = optional(map(string), {})
  })
}

variable "environment" {
  type = string

  validation {
    condition     = contains(["dev", "test", "prod"], var.environment)
    error_message = "Environment must be dev, test, or prod."
  }
}</code>
                  </div>
                  <p class="tf-note">
                    Use <code>object</code> + <code>optional()</code> to define CCoE-approved shapes for apps,
                    networks, accounts, etc. Then all teams conform to one schema.
                  </p>
                </div>
              </div>
            </section>

            <!-- 5. EXPRESSIONS & FUNCTIONS -->
            <section id="tf-funcs" class="tf-section">
              <div class="tf-section-header">
                <h2>5. Expressions & Built-in Functions</h2>
                <span class="tf-badge">Logic</span>
              </div>
              <p class="tf-tagline">
                Terraform is declarative, but it still needs basic logic. Expressions and functions are
                <em>the only</em> way you should encode that logic.
              </p>

              <h3>5.1 Common Expression Patterns</h3>
              <ul class="tf-list">
                <li><strong>Conditionals</strong>: <code>condition ? true_val : false_val</code></li>
                <li><strong>For loops</strong>: <code>[for x in list : expression]</code>, <code>{for k, v in map : ...}</code></li>
                <li><strong>Dynamic blocks</strong>: generate nested blocks from collections.</li>
                <li><strong>Null</strong>: <code>null</code> means “unset / use default” in many providers.</li>
              </ul>
              <div class="tf-code">
                <code>locals {
  public_subnets = [for s in var.subnets : s if s.public]
}

resource "aws_security_group_rule" "egress_all" {
  count             = var.egress_enabled ? 1 : 0
  type              = "egress"
  from_port         = 0
  to_port           = 0
  protocol          = "-1"
  cidr_blocks       = ["0.0.0.0/0"]
  security_group_id = aws_security_group.app.id
}</code>
              </div>

              <h3>5.2 Function Groups & Usage</h3>
              <table class="tf-table">
                <thead>
                  <tr>
                    <th>Group</th>
                    <th>Examples</th>
                    <th>What for</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>String</td>
                    <td><code>lower</code>, <code>upper</code>, <code>replace</code>, <code>format</code>, <code>split</code>, <code>join</code>, <code>trimprefix</code>, <code>trimsuffix</code>, <code>trimspace</code>, <code>substr</code></td>
                    <td>Normalize names, build tags, clean input values.</td>
                  </tr>
                  <tr>
                    <td>Number</td>
                    <td><code>abs</code>, <code>ceil</code>, <code>floor</code>, <code>max</code>, <code>min</code>, <code>parseint</code>, <code>signum</code></td>
                    <td>Index math, port ranges, scaling calculations.</td>
                  </tr>
                  <tr>
                    <td>Collection</td>
                    <td><code>length</code>, <code>contains</code>, <code>distinct</code>, <code>flatten</code>, <code>keys</code>, <code>values</code>, <code>lookup</code>, <code>merge</code>, <code>zipmap</code>, <code>sort</code>, <code>slice</code>, <code>sum</code></td>
                    <td>Build complex objects, dedupe, merge default vs. env-specific settings.</td>
                  </tr>
                  <tr>
                    <td>Encoding</td>
                    <td><code>jsonencode</code>, <code>jsondecode</code>, <code>base64encode</code>, <code>base64decode</code>, <code>urlencode</code>, <code>yamldecode</code>, <code>yamlencode</code></td>
                    <td>Policies, Kubernetes manifests, config blobs.</td>
                  </tr>
                  <tr>
                    <td>Files / Templates</td>
                    <td><code>file</code>, <code>fileexists</code>, <code>filebase64</code>, <code>templatefile</code></td>
                    <td>Render configs, scripts, cloud-init.</td>
                  </tr>
                  <tr>
                    <td>CIDR / Network</td>
                    <td><code>cidrsubnet</code>, <code>cidrsubnets</code>, <code>cidrhost</code>, <code>cidrnetmask</code></td>
                    <td>Subnets and addressing schemes from a root CIDR.</td>
                  </tr>
                  <tr>
                    <td>Crypto</td>
                    <td><code>md5</code>, <code>sha1</code>, <code>sha256</code>, <code>sha512</code>, <code>bcrypt</code></td>
                    <td>Checksum, idempotent naming, password hashes.</td>
                  </tr>
                  <tr>
                    <td>Time</td>
                    <td><code>timestamp</code>, <code>timeadd</code>, <code>formatdate</code></td>
                    <td>Expiry times, TTL windows, naming by date.</td>
                  </tr>
                  <tr>
                    <td>Error-handling</td>
                    <td><code>try</code>, <code>can</code>, <code>coalesce</code>, <code>coalescelist</code>, <code>one</code>, <code>alltrue</code>, <code>anytrue</code></td>
                    <td>Fallbacks, making modules robust to partial inputs.</td>
                  </tr>
                </tbody>
              </table>

              <p class="tf-note">
                This table groups most of the commonly used functions. In practice, you’ll only lean on
                a subset in each module – the key is to know <em>what group to reach for</em> when solving a problem.
              </p>
            </section>

            <!-- 6. PROVIDERS BY DOMAIN -->
            <section id="tf-providers" class="tf-section">
              <div class="tf-section-header">
                <h2>6. Providers Grouped by Domain</h2>
                <span class="tf-badge">Clouds & APIs</span>
              </div>
              <p class="tf-tagline">
                Providers are adapters that translate HCL into API calls. Group them by what they do
                (compute, network, IAM, storage, platform tools) for clean CCoE patterns.
              </p>

              <div class="tf-usecase-grid">
                <div class="tf-usecase-card">
                  <h3>Compute & Runtime</h3>
                  <p>AWS EC2, Azure VM, GCP Compute, Oracle Compute, Kubernetes, vSphere, ECS, EKS, AKS, GKE.</p>
                  <div class="tf-usecase-tags">
                    <span>aws</span><span>azurerm</span><span>google</span><span>oci</span><span>kubernetes</span><span>vsphere</span>
                  </div>
                </div>
                <div class="tf-usecase-card">
                  <h3>Networking</h3>
                  <p>VPC/VNet/VCN, load balancers, DNS, CDN, firewalls, WAF.</p>
                  <div class="tf-usecase-tags">
                    <span>aws</span><span>azurerm</span><span>google</span><span>oci</span><span>cloudflare</span>
                  </div>
                </div>
                <div class="tf-usecase-card">
                  <h3>Identity & Secrets</h3>
                  <p>IAM roles/policies, SSO, directory entries, secrets engines.</p>
                  <div class="tf-usecase-tags">
                    <span>aws</span><span>azuread</span><span>google</span><span>oci</span><span>vault</span><span>okta</span>
                  </div>
                </div>
                <div class="tf-usecase-card">
                  <h3>Storage & Databases</h3>
                  <p>Object storage, block storage, managed DBs, caches.</p>
                  <div class="tf-usecase-tags">
                    <span>aws</span><span>azurerm</span><span>google</span><span>oci</span><span>mongodbatlas</span><span>redis</span>
                  </div>
                </div>
                <div class="tf-usecase-card">
                  <h3>DevOps & Platform</h3>
                  <p>GitHub, GitLab, CI/CD runners, monitoring, logging.</p>
                  <div class="tf-usecase-tags">
                    <span>github</span><span>gitlab</span><span>datadog</span><span>newrelic</span>
                  </div>
                </div>
                <div class="tf-usecase-card">
                  <h3>Enterprise Integration</h3>
                  <p>Ticketing, CMDB, policy engines, FinOps, and cost tools.</p>
                  <div class="tf-usecase-tags">
                    <span>servicenow</span><span>pagerduty</span><span>azapi</span>
                  </div>
                </div>
              </div>

              <p class="tf-note">
                In your Architect’s Kit, you’ll typically preselect “blessed” providers per domain
                (e.g., <code>aws</code> + <code>azurerm</code> + <code>google</code> + <code>oci</code> + <code>kubernetes</code>),
                then build modules on top so teams never interact with raw provider resources directly.
              </p>
            </section>

            <!-- 7. MODULES & REUSE -->
            <section id="tf-modules" class="tf-section">
              <div class="tf-section-header">
                <h2>7. Modules, Composition & Patterns</h2>
                <span class="tf-badge">Blueprints</span>
              </div>
              <p class="tf-tagline">
                Modules are where architecture patterns become enforceable code – landing zones, app stacks,
                shared services, everything.
              </p>

              <details class="tf-details" open>
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label">Module Types</span>
                    <span class="tf-summary-meta">Root, reusable, and external/registry.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <dl class="tf-kv">
                    <dt>Root module</dt>
                    <dd>Your top-level config in a folder (often environment-specific).</dd>
                    <dt>Child modules</dt>
                    <dd>Reusable packages for VPCs, app stacks, databases, etc.</dd>
                    <dt>Registry modules</dt>
                    <dd>Public or private registry modules, versioned and shareable.</dd>
                  </dl>
                  <div class="tf-code">
                    <code>module "vpc" {
  source  = "terraform-aws-modules/vpc/aws"
  version = "~&gt; 5.0"

  name = "${var.environment}-core"
  cidr = "10.0.0.0/16"

  azs             = local.az_list
  public_subnets  = local.public_cidrs
  private_subnets = local.private_cidrs
}</code>
                  </div>
                </div>
              </details>

              <details class="tf-details">
                <summary>
                  <div class="tf-summary-text">
                    <span class="tf-summary-label">Input/Output Contract</span>
                    <span class="tf-summary-meta">Make modules stable across environments.</span>
                  </div>
                </summary>
                <div class="tf-details-body">
                  <p class="tf-note">
                    A “good” module has a small, clear set of inputs and only exports what callers
                    truly need. This is how the CCoE enforces standards while still giving teams flexibility.
                  </p>
                  <div class="tf-code">
                    <code># In module: variables
variable "environment" { type = string }
variable "service_name" { type = string }

# In module: outputs
output "vpc_id" {
  value       = aws_vpc.core.id
  description = "VPC ID created by this module."
}

# In root module: consume
module "network" {
  source       = "../modules/network"
  environment  = var.environment
  service_name = "payments"
}

output "network_vpc_id" {
  value = module.network.vpc_id
}</code>
                  </div>
                </div>
              </details>
            </section>

            <!-- 8. STATE & BACKENDS -->
            <section id="tf-state" class="tf-section">
              <div class="tf-section-header">
                <h2>8. State Management & Backends</h2>
                <span class="tf-badge">Reality</span>
              </div>
              <p class="tf-tagline">
                State is the link between config and reality. Backends store it, locks protect it,
                and state commands help you repair / migrate it.
              </p>

              <h3>8.1 Backends (Options)</h3>
              <ul class="tf-list">
                <li><strong>local</strong> – local file on disk (lab only).</li>
                <li><strong>s3</strong> – AWS S3 bucket + DynamoDB locks.</li>
                <li><strong>azurerm</strong> – Azure storage account + blob container.</li>
                <li><strong>gcs</strong> – Google Cloud Storage bucket.</li>
                <li><strong>remote</strong> – Terraform Cloud / Enterprise.</li>
                <li><strong>consul</strong>, etcd – older patterns for key/value backends.</li>
              </ul>

              <div class="tf-code">
                <code>terraform {
  backend "s3" {
    bucket         = "ccoe-tfstate"
    key            = "landing-zone/global.tfstate"
    region         = "us-east-1"
    dynamodb_table = "tf-locks"
    encrypt        = true
  }
}</code>
              </div>

              <h3>8.2 State Commands</h3>
              <table class="tf-table">
                <thead>
                  <tr>
                    <th>Command</th>
                    <th>Purpose</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><code>terraform state list</code></td>
                    <td>Show all objects in current state file.</td>
                  </tr>
                  <tr>
                    <td><code>terraform state show &lt;addr&gt;</code></td>
                    <td>Inspect a specific resource’s state.</td>
                  </tr>
                  <tr>
                    <td><code>terraform state mv</code></td>
                    <td>Move an address (e.g., after refactors) without recreating.</td>
                  </tr>
                  <tr>
                    <td><code>terraform state rm</code></td>
                    <td>Detach from Terraform (resource stays live in cloud).</td>
                  </tr>
                  <tr>
                    <td><code>terraform import</code></td>
                    <td>Attach an existing resource into state.</td>
                  </tr>
                </tbody>
              </table>
            </section>

            <!-- 9. WORKFLOWS -->
            <section id="tf-workflows" class="tf-section">
              <div class="tf-section-header">
                <h2>9. Workflows, Environments & CI/CD</h2>
                <span class="tf-badge">Lifecycle</span>
              </div>
              <p class="tf-tagline">
                The same language options behave differently when wrapped in different workflows.
                CCoE defines the “golden path” so teams don’t invent their own.
              </p>

              <div class="tf-columns">
                <div>
                  <h3>9.1 Core Commands</h3>
                  <ul class="tf-list">
                    <li><code>terraform init</code> – install providers, configure backend.</li>
                    <li><code>terraform validate</code> – syntax and static checks.</li>
                    <li><code>terraform plan</code> – diff between desired vs. current.</li>
                    <li><code>terraform apply</code> – execute plan.</li>
                    <li><code>terraform destroy</code> – tear everything down.</li>
                  </ul>
                  <div class="tf-code">
                    <code># Typical pipeline skeleton
terraform fmt       # normalize style
terraform validate  # static checks
terraform plan -out plan.bin
terraform apply plan.bin</code>
                  </div>
                </div>
                <div>
                  <h3>9.2 Environments & Workspaces</h3>
                  <ul class="tf-list">
                    <li><strong>Pattern 1:</strong> separate folders/repos per env (<code>envs/dev</code>, <code>envs/prod</code>).</li>
                    <li><strong>Pattern 2:</strong> workspaces per env (<code>terraform workspace new dev</code>).</li>
                  </ul>
                  <p class="tf-note">
                    CCoE usually standardizes one approach (e.g., separate state per env with
                    explicit backend config) and documents the pattern in this toolkit.
                  </p>
                </div>
              </div>
            </section>

            <!-- 10. QUICK USE-CASE INDEX -->
            <section id="tf-usecases" class="tf-section">
              <div class="tf-section-header">
                <h2>10. Quick Use-Case Index (What to Use for What)</h2>
              <span class="tf-badge">Cheat Sheet</span>
              </div>
              <p class="tf-tagline">
                Map real-world tasks to Terraform language options. This is the “decision logic” view.
              </p>

              <table class="tf-table">
                <thead>
                  <tr>
                    <th>Task</th>
                    <th>Core Blocks / Options</th>
                    <th>Typical Functions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Create secure multi-AZ VPC</td>
                    <td><code>resource</code> VPC/subnets, <code>module</code> VPC, <code>for_each</code>, <code>locals</code></td>
                    <td><code>cidrsubnet</code>, <code>cidrhost</code>, <code>merge</code>, <code>length</code></td>
                  </tr>
                  <tr>
                    <td>Standardized app stack</td>
                    <td><code>module</code> app, <code>variable</code> objects, <code>output</code> endpoints</td>
                    <td><code>format</code>, <code>join</code>, <code>lookup</code>, <code>try</code></td>
                  </tr>
                  <tr>
                    <td>Account / subscription / compartment bootstrap</td>
                    <td><code>module</code> landing zone, IAM resources, <code>for_each</code> across accounts/projects/compartments</td>
                    <td><code>zipmap</code>, <code>keys</code>, <code>values</code></td>
                  </tr>
                  <tr>
                    <td>Multi-cloud pattern</td>
                    <td><code>provider</code> aliases, conditional <code>resource</code> blocks, shared <code>module</code> interface</td>
                    <td><code>coalesce</code>, <code>try</code>, <code>can</code></td>
                  </tr>
                  <tr>
                    <td>Policy & config blobs</td>
                    <td>IAM/KMS resources, <code>locals</code>, <code>variable</code> objects</td>
                    <td><code>jsonencode</code>, <code>templatefile</code>, <code>yamldecode</code></td>
                  </tr>
                  <tr>
                    <td>Onboarding new app team</td>
                    <td>Standard <code>module</code> suite, prewired providers, constrained variables</td>
                    <td><code>contains</code>, <code>alltrue</code>, <code>anytrue</code></td>
                  </tr>
                </tbody>
              </table>

              <p class="tf-note">
                Extend this table with your own patterns (e.g., “internal SaaS onboarding”,
                “regulated data enclave”, “edge location pattern”) and tie each to modules,
                providers, and meta-arguments in this encyclopedia.
              </p>
            </section>

            <!-- 11. AWS MAP -->
            <section id="tf-aws" class="tf-section">
              <div class="tf-section-header">
                <h2>11. AWS Terraform Map (by Domain)</h2>
                <span class="tf-badge">AWS</span>
              </div>
              <p class="tf-tagline">
                Quick map from AWS building blocks to Terraform <code>aws_*</code> resources and the
                language options you’ll use most with them.
              </p>

              <table class="tf-table">
                <thead>
                  <tr>
                    <th>Domain</th>
                    <th>AWS Services</th>
                    <th>Key Terraform Resources</th>
                    <th>Notes / Options</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Networking</td>
                    <td>VPC, Subnet, IGW, NAT, TGW, Route53, NACL, SG</td>
                    <td><code>aws_vpc</code>, <code>aws_subnet</code>, <code>aws_internet_gateway</code>, <code>aws_nat_gateway</code>, <code>aws_route_table</code>, <code>aws_route53_zone</code>, <code>aws_security_group</code></td>
                    <td>Use <code>for_each</code> for subnets; use <code>cidrsubnet</code> to derive CIDRs; modules for standardized VPC.</td>
                  </tr>
                  <tr>
                    <td>Compute</td>
                    <td>EC2, ASG, ECS, EKS, Lambda</td>
                    <td><code>aws_instance</code>, <code>aws_launch_template</code>, <code>aws_autoscaling_group</code>, <code>aws_eks_cluster</code>, <code>aws_lambda_function</code></td>
                    <td>Pattern: app module wraps EC2/ECS/EKS plus SGs, IAM roles, load balancers.</td>
                  </tr>
                  <tr>
                    <td>Identity</td>
                    <td>IAM, STS</td>
                    <td><code>aws_iam_role</code>, <code>aws_iam_policy</code>, <code>aws_iam_role_policy_attachment</code>, <code>aws_iam_user</code>, <code>aws_iam_group</code></td>
                    <td>Use <code>jsonencode</code> for policy docs; build roles from object variables representing persona.</td>
                  </tr>
                  <tr>
                    <td>Storage</td>
                    <td>S3, EBS, EFS</td>
                    <td><code>aws_s3_bucket</code>, <code>aws_ebs_volume</code>, <code>aws_efs_file_system</code>, <code>aws_efs_mount_target</code></td>
                    <td>Protect critical buckets with <code>lifecycle.prevent_destroy</code>; enforce encryption defaults via module.</td>
                  </tr>
                  <tr>
                    <td>Database</td>
                    <td>RDS, Aurora, DynamoDB</td>
                    <td><code>aws_db_instance</code>, <code>aws_rds_cluster</code>, <code>aws_dynamodb_table</code></td>
                    <td>Use parameter objects for backup, multi-AZ, encryption, network placement.</td>
                  </tr>
                  <tr>
                    <td>Security</td>
                    <td>KMS, CloudTrail, Config, GuardDuty</td>
                    <td><code>aws_kms_key</code>, <code>aws_cloudtrail</code>, <code>aws_config_configuration_recorder</code>, <code>aws_guardduty_detector</code></td>
                    <td>Centralize “security services” into one module per region/account.</td>
                  </tr>
                </tbody>
              </table>
            </section>

            <!-- 12. AZURE MAP -->
            <section id="tf-azure" class="tf-section">
              <div class="tf-section-header">
                <h2>12. Azure Terraform Map (by Domain)</h2>
                <span class="tf-badge">Azure</span>
              </div>
              <p class="tf-tagline">
                Mapping Azure architecture to <code>azurerm_*</code> resources and the Terraform
                options you’ll combine with them.
              </p>

              <table class="tf-table">
                <thead>
                  <tr>
                    <th>Domain</th>
                    <th>Azure Services</th>
                    <th>Key Terraform Resources</th>
                    <th>Notes / Options</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Networking</td>
                    <td>Virtual Network, Subnets, NSG, Azure Firewall, Private Link</td>
                    <td><code>azurerm_virtual_network</code>, <code>azurerm_subnet</code>, <code>azurerm_network_security_group</code>, <code>azurerm_firewall</code>, <code>azurerm_private_endpoint</code></td>
                    <td>Pattern: VNet module that takes address space + subnet map and builds NSGs, routes, endpoints with <code>for_each</code>.</td>
                  </tr>
                  <tr>
                    <td>Compute</td>
                    <td>Virtual Machines, VM Scale Sets, AKS</td>
                    <td><code>azurerm_linux_virtual_machine</code>, <code>azurerm_windows_virtual_machine</code>, <code>azurerm_kubernetes_cluster</code>, <code>azurerm_virtual_machine_scale_set</code></td>
                    <td>Use object variables for SKU, OS, disks, managed identity; optionally <code>templatefile</code> for cloud-init.</td>
                  </tr>
                  <tr>
                    <td>Identity</td>
                    <td>Azure AD, Managed Identity, RBAC</td>
                    <td><code>azuread_user</code>, <code>azuread_group</code>, <code>azurerm_role_assignment</code>, <code>azurerm_user_assigned_identity</code></td>
                    <td>Central RBAC module uses <code>for_each</code> for role assignments to subscriptions and resource groups.</td>
                  </tr>
                  <tr>
                    <td>Storage</td>
                    <td>Storage Accounts, Blobs, Files</td>
                    <td><code>azurerm_storage_account</code>, <code>azurerm_storage_container</code>, <code>azurerm_storage_share</code></td>
                    <td>Enforce naming + redundancy via validation + default objects; lock down public access by default.</td>
                  </tr>
                  <tr>
                    <td>Database</td>
                    <td>Azure SQL, PostgreSQL, Cosmos DB</td>
                    <td><code>azurerm_mssql_server</code>, <code>azurerm_mssql_database</code>, <code>azurerm_postgresql_flexible_server</code>, <code>azurerm_cosmosdb_account</code></td>
                    <td>Set network rules, AD auth, backup policies via module-level inputs.</td>
                  </tr>
                  <tr>
                    <td>Security & Governance</td>
                    <td>Key Vault, Policy, Monitor, Log Analytics</td>
                    <td><code>azurerm_key_vault</code>, <code>azurerm_policy_definition</code>, <code>azurerm_policy_assignment</code>, <code>azurerm_monitor_diagnostic_setting</code></td>
                    <td>CCoE pattern: one “compliance baseline” module that wires policies and diagnostics across subscriptions.</td>
                  </tr>
                </tbody>
              </table>
            </section>

            <!-- 13. GCP MAP -->
            <section id="tf-gcp" class="tf-section">
              <div class="tf-section-header">
                <h2>13. GCP Terraform Map (by Domain)</h2>
                <span class="tf-badge">GCP</span>
              </div>
              <p class="tf-tagline">
                Mapping GCP primitives to <code>google_*</code> resources and the language tools
                you’ll compose them with.
              </p>

              <table class="tf-table">
                <thead>
                  <tr>
                    <th>Domain</th>
                    <th>GCP Services</th>
                    <th>Key Terraform Resources</th>
                    <th>Notes / Options</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Networking</td>
                    <td>VPC, Subnets, Cloud Router, Cloud NAT, DNS</td>
                    <td><code>google_compute_network</code>, <code>google_compute_subnetwork</code>, <code>google_compute_router</code>, <code>google_compute_router_nat</code>, <code>google_dns_managed_zone</code></td>
                    <td>Use <code>for_each</code> to generate per-region subnets; module-level inputs define CIDR strategy and routing.</td>
                  </tr>
                  <tr>
                    <td>Compute</td>
                    <td>GCE, GKE, MIGs</td>
                    <td><code>google_compute_instance</code>, <code>google_compute_instance_template</code>, <code>google_compute_region_instance_group_manager</code>, <code>google_container_cluster</code></td>
                    <td>Pattern: app module with MIG or GKE, plus firewall rules and load balancing.</td>
                  </tr>
                  <tr>
                    <td>Identity</td>
                    <td>IAM Roles, Service Accounts</td>
                    <td><code>google_service_account</code>, <code>google_project_iam_binding</code>, <code>google_project_iam_member</code></td>
                    <td>Use <code>for_each</code> on IAM bindings from a map of “team → roles”.</td>
                  </tr>
                  <tr>
                    <td>Storage</td>
                    <td>Cloud Storage</td>
                    <td><code>google_storage_bucket</code>, <code>google_storage_bucket_iam_member</code></td>
                    <td>Define uniform bucket-level IAM and retention policies via module.</td>
                  </tr>
                  <tr>
                    <td>Database & Analytics</td>
                    <td>Cloud SQL, BigQuery</td>
                    <td><code>google_sql_database_instance</code>, <code>google_sql_database</code>, <code>google_bigquery_dataset</code>, <code>google_bigquery_table</code></td>
                    <td>Use objects to capture retention, encryption, region, and authorized networks.</td>
                  </tr>
                  <tr>
                    <td>Security & Logging</td>
                    <td>KMS, Cloud Logging, Cloud Monitoring</td>
                    <td><code>google_kms_key_ring</code>, <code>google_kms_crypto_key</code>, <code>google_logging_project_sink</code>, <code>google_monitoring_alert_policy</code></td>
                    <td>Central module wires sinks to SIEM, exports logs cross-project.</td>
                  </tr>
                </tbody>
              </table>
            </section>

            <!-- 14. ORACLE MAP -->
            <section id="tf-oracle" class="tf-section">
              <div class="tf-section-header">
                <h2>14. Oracle Cloud Terraform Map (by Domain)</h2>
                <span class="tf-badge">Oracle</span>
              </div>
              <p class="tf-tagline">
                Mapping Oracle Cloud Infrastructure (OCI) concepts to <code>oci_*</code> resources and
                the Terraform options you pair with them.
              </p>

              <table class="tf-table">
                <thead>
                  <tr>
                    <th>Domain</th>
                    <th>OCI Services</th>
                    <th>Key Terraform Resources</th>
                    <th>Notes / Options</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Tenancy & Compartments</td>
                    <td>Tenancy, Compartments</td>
                    <td><code>oci_identity_compartment</code>, <code>oci_identity_tenancy</code> (data)</td>
                    <td>Pattern: platform team defines a standard compartment layout per business unit/app; use <code>for_each</code> across compartments.</td>
                  </tr>
                  <tr>
                    <td>Networking</td>
                    <td>VCN, Subnets, DRG, LPG, Route Tables, Security Lists, NSG</td>
                    <td><code>oci_core_vcn</code>, <code>oci_core_subnet</code>, <code>oci_core_route_table</code>, <code>oci_core_drg</code>, <code>oci_core_security_list</code>, <code>oci_core_network_security_group</code></td>
                    <td>Use <code>cidrsubnet</code> for address planning; modules wrap VCN + subnets + security constructs as one unit.</td>
                  </tr>
                  <tr>
                    <td>Compute</td>
                    <td>Compute Instances, Instance Configs, Instance Pools</td>
                    <td><code>oci_core_instance</code>, <code>oci_core_instance_configuration</code>, <code>oci_core_instance_pool</code></td>
                    <td>Object variables capture shape, image, boot volume params; <code>for_each</code> to deploy per AZ/AD.</td>
                  </tr>
                  <tr>
                    <td>Identity</td>
                    <td>Users, Groups, Policies, Dynamic Groups</td>
                    <td><code>oci_identity_user</code>, <code>oci_identity_group</code>, <code>oci_identity_policy</code>, <code>oci_identity_dynamic_group</code></td>
                    <td>Policies are strings; build them from <code>templatefile</code> or <code>jsonencode</code>-style helpers in locals.</td>
                  </tr>
                  <tr>
                    <td>Storage</td>
                    <td>Object Storage, Block Volumes, File Storage</td>
                    <td><code>oci_objectstorage_bucket</code>, <code>oci_core_volume</code>, <code>oci_file_storage_file_system</code></td>
                    <td>Use modules for “evidence buckets” / “logs buckets”; enforce encryption and retention by default.</td>
                  </tr>
                  <tr>
                    <td>Database</td>
                    <td>Autonomous DB, DB Systems</td>
                    <td><code>oci_database_autonomous_database</code>, <code>oci_database_db_system</code></td>
                    <td>Object inputs for workload type, license model, backup window, network access controls.</td>
                  </tr>
                  <tr>
                    <td>Security & Observability</td>
                    <td>Vault, Keys, Logging, Events</td>
                    <td><code>oci_kms_vault</code>, <code>oci_kms_key</code>, <code>oci_logging_log</code>, <code>oci_logging_log_group</code>, <code>oci_events_rule</code></td>
                    <td>Central “security baseline” module wires logging to SIEM and enforces KMS usage for all encrypted resources.</td>
                  </tr>
                </tbody>
              </table>
            </section>

            <!-- 15. CCOE DECISION MAPS -->
            <section id="tf-ccoe-maps" class="tf-section">
              <div class="tf-section-header">
                <h2>15. CCoE Decision Maps (From Requirement → Terraform)</h2>
                <span class="tf-badge">Governance</span>
              </div>
              <p class="tf-tagline">
                This is the “translator” layer. You start with a sentence like
                <em>“We need X environment for Y app under Z rules”</em> and this section tells you:
                1) which clouds/services to combine, 2) which Terraform modules to call, and
                3) which language features you actually use.
              </p>

              <h3>15.0 How to Use This Section</h3>
              <ol class="tf-list">
                <li><strong>Pick the requirement pattern</strong> that looks closest to what you need.</li>
                <li><strong>Steal the provider/module stack</strong> from the table: that’s your
                  “Terraform recipe name” (e.g. <code>landing_zone</code> module + <code>aws</code>/<code>azurerm</code>).</li>
                <li><strong>Copy the language options</strong> (modules, <code>for_each</code>, objects, functions)
                  into the module or root config you’re wiring.</li>
                <li><strong>Refine the pattern</strong> by adding your own row with tighter constraints
                  (e.g. “regulated-data-landing-zone”, “internet-facing-app-stack”).</li>
              </ol>

              <h3>15.1 Decision Table (Abstract Requirement → Terraform Stack)</h3>
              <table class="tf-table">
                <thead>
                  <tr>
                    <th>Requirement Pattern</th>
                    <th>Cloud Options</th>
                    <th>Terraform Providers &amp; Modules</th>
                    <th>Language Options (What You Actually Use)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Isolated secure landing zone (per tenant / environment)</td>
                    <td>
                      One account / subscription / project / compartment per tenant, with its own
                      VPC/VNet/VCN and core security services
                    </td>
                    <td>
                      <code>aws</code> / <code>azurerm</code> / <code>google</code> / <code>oci</code> +
                      shared <code>landing_zone</code> module that creates:
                      org hierarchy (if needed), network, logging, basic IAM
                    </td>
                    <td>
                      <ul class="tf-list">
                        <li><code>module "landing_zone"</code> called once per tenant/env</li>
                        <li><code>for_each</code> over tenants/environments</li>
                        <li><code>object</code> variables for “landing zone config”</li>
                        <li><code>cidrsubnet</code>/<code>cidrsubnets</code> for address planning</li>
                      </ul>
                    </td>
                  </tr>
                  <tr>
                    <td>Secure connectivity between environments / networks</td>
                    <td>
                      VPNs, private connectivity (Direct Connect / ExpressRoute / FastConnect),
                      private service endpoints, VPC/VNet peering
                    </td>
                    <td>
                      Per-cloud “connectivity” modules:
                      <ul class="tf-list">
                        <li>AWS: TGW/VGW/VPN modules</li>
                        <li>Azure: vNet gateway + connections</li>
                        <li>GCP: Cloud VPN / Interconnect modules</li>
                        <li>OCI: DRG + IPSec modules</li>
                      </ul>
                    </td>
                    <td>
                      <ul class="tf-list">
                        <li><code>resource</code> for gateways, routers, links</li>
                        <li><code>data</code> sources for existing networks</li>
                        <li><code>depends_on</code> for ordered bring-up</li>
                        <li><code>for_each</code> over “connection pairs” map</li>
                      </ul>
                    </td>
                  </tr>
                  <tr>
                    <td>Centralized audit &amp; compliance logging</td>
                    <td>
                      Dedicated log accounts/projects/compartments, SIEM or data lake,
                      long-term storage, immutable archives
                    </td>
                    <td>
                      “Audit baseline” module per cloud that enables:
                      CloudTrail/Activity Logs, Config/Policy logs, flow logs, app logs
                      and exports to central storage/analytics
                    </td>
                    <td>
                      <ul class="tf-list">
                        <li><code>locals</code> for log destinations (buckets, topics, workspaces)</li>
                        <li><code>jsonencode</code> / <code>yamlencode</code> for policy and routing config</li>
                        <li><code>for_each</code> over regions/accounts/projects</li>
                        <li><code>lifecycle.prevent_destroy</code> for log buckets</li>
                      </ul>
                    </td>
                  </tr>
                  <tr>
                    <td>Zero-trust application exposure</td>
                    <td>
                      Internet and internal apps fronted by WAF/API gateway/app gateway,
                      minimal open ports, TLS everywhere, no direct access to workloads
                    </td>
                    <td>
                      “App perimeter” module that wraps:
                      ALB/ELB + WAF (AWS),
                      Application Gateway / Front Door (Azure),
                      External HTTP(S) / Cloud Armor (GCP),
                      OCI LB/WAF (Oracle)
                    </td>
                    <td>
                      <ul class="tf-list">
                        <li><code>module "app_perimeter"</code> with <code>object</code>-typed “route rules”</li>
                        <li><code>validation</code> blocks for allowed protocols/TLS versions</li>
                        <li><code>dynamic</code> blocks for listener/rule lists</li>
                        <li><code>for_each</code> over services/endpoints</li>
                      </ul>
                    </td>
                  </tr>
                  <tr>
                    <td>Multi-cloud portability (same app on multiple clouds)</td>
                    <td>
                      Equivalent runtimes (containers, functions, DB, storage, messaging)
                      wired behind the same logical “app contract”
                    </td>
                    <td>
                      Cloud-agnostic <code>app_stack</code> module that internally calls:
                      <ul class="tf-list">
                        <li>AWS: ECS/EKS/Lambda + RDS/Dynamo + S3</li>
                        <li>Azure: AKS/App Service + SQL/Cosmos + Storage</li>
                        <li>GCP: GKE/Cloud Run + Cloud SQL/Spanner + GCS</li>
                        <li>OCI: OKE/Functions + Autonomous DB + Object Storage</li>
                      </ul>
                    </td>
                    <td>
                      <ul class="tf-list">
                        <li><code>provider</code> aliases (<code>aws.us</code>, <code>azurerm.primary</code>, etc.)</li>
                        <li><code>var.cloud</code> or <code>var.target_clouds</code> object</li>
                        <li><code>try</code> / <code>can</code> to handle cloud-specific attrs</li>
                        <li>Conditional resources: <code>count = var.cloud == "aws" ? 1 : 0</code></li>
                      </ul>
                    </td>
                  </tr>
                  <tr>
                    <td>Regulated / high-sensitivity data enclave</td>
                    <td>
                      Strict network isolation, encryption requirements, limited personas,
                      dedicated logging and key management
                    </td>
                    <td>
                      <code>regulated_enclave</code> module that composes:
                      landing zone + private network + databases + storage + KMS/Key Vault/Cloud KMS
                    </td>
                    <td>
                      <ul class="tf-list">
                        <li><code>object</code> variable <code>enclave_policy</code> describing sensitivity + controls</li>
                        <li><code>validation</code> that enforces “no public endpoints” etc.</li>
                        <li><code>jsonencode</code> for encryption/policy docs</li>
                        <li><code>lifecycle</code> rules to block accidental deletion</li>
                      </ul>
                    </td>
                  </tr>
                </tbody>
              </table>

              <h3>15.2 Example Walk-Through: “New Production App Space”</h3>
              <p class="tf-tagline">
                Example: You’re told “we need a new production space for the Payments API, in AWS and Azure, with
                logs in a central place”.
              </p>

              <ol class="tf-list">
                <li><strong>Classify the requirement:</strong> this is a mix of:
                  <ul class="tf-list">
                    <li>“Isolated secure landing zone (per environment)”</li>
                    <li>“Zero-trust application exposure”</li>
                    <li>“Centralized audit &amp; compliance logging”</li>
                  </ul>
                </li>
                <li><strong>Pick clouds & services:</strong>
                  <ul class="tf-list">
                    <li>AWS + Azure for runtime</li>
                    <li>Central log account/subscription for logs</li>
                    <li>App perimeter modules in both clouds</li>
                  </ul>
                </li>
                <li><strong>Pick Terraform modules:</strong>
                  <ul class="tf-list">
                    <li><code>module "landing_zone_aws"</code>, <code>module "landing_zone_azure"</code></li>
                    <li><code>module "app_perimeter_payments"</code></li>
                    <li><code>module "central_audit_baseline"</code></li>
                  </ul>
                </li>
                <li><strong>Choose language features:</strong>
                  <ul class="tf-list">
                    <li><code>for_each</code> over environments (<code>{"prod-us", "prod-eu"}</code>)</li>
                    <li><code>object</code> variable for <code>payments_app_config</code></li>
                    <li><code>cidrsubnet</code> for splitting network ranges per env</li>
                    <li><code>jsonencode</code> to generate IAM/policy docs</li>
                  </ul>
                </li>
                <li><strong>Wire it up:</strong>
                  <div class="tf-code">
                    <code>variable "environments" {
  type    = set(string)
  default = ["prod-us", "prod-eu"]
}

variable "payments_app_config" {
  type = object({
    name          = string
    ports         = list(number)
    public        = bool
    allowed_cidrs = list(string)
  })
}

module "landing_zone_aws" {
  for_each    = var.environments
  source      = "../modules/landing-zone-aws"
  environment = each.key
}

module "app_perimeter_payments" {
  source      = "../modules/app-perimeter"
  cloud       = "aws"
  environment = "prod-us"
  app         = var.payments_app_config
}</code>
                  </div>
                </li>
              </ol>

              <p class="tf-note">
                The idea: every time someone says “we need X environment / pattern”, you don’t start from zero.
                You land in this section, find the closest row, grab the providers + modules + language options,
                and you’re 80% there. Over time, you add more rows that match your real-world patterns.
              </p>
            </section>

            <!-- 16. DEEP DIVE LINKS -->
            <section id="tf-deep-dives" class="tf-section">
              <div class="tf-section-header">
                <h2>16. Cloud Playbooks & Drilldowns</h2>
                <span class="tf-badge">More Detail</span>
              </div>
              <p class="tf-tagline">
                When you need full-page, cloud-specific maps (more examples, more tables, more
                options), jump into these dedicated playbooks. They keep all the fine-grain details
                there and leave this page as the high-level encyclopedia.
              </p>

              <div class="tf-link-grid">
                <div class="tf-link-card">
                  <div class="tf-link-card-title">AWS Terraform Playbook</div>
                  <p>
                    Full breakdown of AWS accounts, landing zones, VPC patterns, ECS/EKS stacks,
                    guardrails, and CCoE patterns – all mapped to <code>aws_*</code> resources and language options.
                  </p>
                  <a href="terraform/terraform-aws.html">Open AWS Terraform Map ⟶</a>
                </div>

                <div class="tf-link-card">
                  <div class="tf-link-card-title">Azure Terraform Playbook</div>
                  <p>
                    Hub-spoke VNets, subscriptions, policies, AKS, storage and data services
                    with patterns for isolated networks and secure enclaves on top of
                    <code>azurerm_*</code> and <code>azuread_*</code>.
                  </p>
                  <a href="terraform/terraform-azure.html">Open Azure Terraform Map ⟶</a>
                </div>

                <div class="tf-link-card">
                  <div class="tf-link-card-title">GCP Terraform Playbook</div>
                  <p>
                    Org / folder / project layouts, shared VPCs, GKE, BigQuery and central
                    logging/monitoring patterns expressed via <code>google_*</code> resources.
                  </p>
                  <a href="terraform/terraform-gcp.html">Open GCP Terraform Map ⟶</a>
                </div>

                <div class="tf-link-card">
                  <div class="tf-link-card-title">Oracle Cloud Terraform Playbook</div>
                  <p>
                    Tenancy and compartment layout, VCN patterns, compute, identity, storage,
                    database, and security baselines using <code>oci_*</code> resources wired into the same CCoE model.
                  </p>
                  <a href="terraform/terraform-oracle.html">Open Oracle Terraform Map ⟶</a>
                </div>
              </div>

              <p class="tf-note">
                You can add more drilldowns later (for example, <em>“Kubernetes Everywhere”</em>,
                <em>“On-prem & VMware”</em>, or any other deep dive) by
                dropping new HTML files in the <code>/terraform/</code> directory and adding cards here.
              </p>
            </section>
          </main>
        </div>
      </section>

      <div class="footer-note">
        Terraform reference page for the Architect's Toolkit. Extend sections or link into cloud-specific playbooks.
      </div>
    </div>
  </div>
</body>
</html>
